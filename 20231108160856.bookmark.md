# Terraform 12 - for_each with list of objects · GitHub (gist.github.com)

<https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22>

## Description

Terraform 12 - for_each with list of objects. GitHub Gist: instantly share code, notes, and snippets.

## Content

[Skip to content](#start-of-content){.px-2 .py-4 .color-bg-accent-emphasis .color-fg-on-emphasis .show-on-focus .js-skip-to-content}

[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIyNCIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1tYXJrLWdpdGh1YiB2LWFsaWduLW1pZGRsZSBkLWlubGluZS1ibG9jayBkLW1kLW5vbmUiPgogICAgPHBhdGggZD0iTTggMGM0LjQyIDAgOCAzLjU4IDggOGE4LjAxMyA4LjAxMyAwIDAgMS01LjQ1IDcuNTljLS40LjA4LS41NS0uMTctLjU1LS4zOCAwLS4yNy4wMS0xLjEzLjAxLTIuMiAwLS43NS0uMjUtMS4yMy0uNTQtMS40OCAxLjc4LS4yIDMuNjUtLjg4IDMuNjUtMy45NSAwLS44OC0uMzEtMS41OS0uODItMi4xNS4wOC0uMi4zNi0xLjAyLS4wOC0yLjEyIDAgMC0uNjctLjIyLTIuMi44Mi0uNjQtLjE4LTEuMzItLjI3LTItLjI3LS42OCAwLTEuMzYuMDktMiAuMjctMS41My0xLjAzLTIuMi0uODItMi4yLS44Mi0uNDQgMS4xLS4xNiAxLjkyLS4wOCAyLjEyLS41MS41Ni0uODIgMS4yOC0uODIgMi4xNSAwIDMuMDYgMS44NiAzLjc1IDMuNjQgMy45NS0uMjMuMi0uNDQuNTUtLjUxIDEuMDctLjQ2LjIxLTEuNjEuNTUtMi4zMy0uNjYtLjE1LS4yNC0uNi0uODMtMS4yMy0uODItLjY3LjAxLS4yNy4zOC4wMS41My4zNC4xOS43My45LjgyIDEuMTMuMTYuNDUuNjggMS4zMSAyLjY5Ljk0IDAgLjY3LjAxIDEuMy4wMSAxLjQ5IDAgLjIxLS4xNS40NS0uNTUuMzhBNy45OTUgNy45OTUgMCAwIDEgMCA4YzAtNC40MiAzLjU4LTggOC04WiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-mark-github .v-align-middle .d-inline-block .d-md-none}
![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDQ1IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSI2NyIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1sb2dvLWdpdGh1YiB2LWFsaWduLW1pZGRsZSBkLW5vbmUgZC1tZC1pbmxpbmUtYmxvY2siPgogICAgPHBhdGggZD0iTTguODEgNy4zNXY1Ljc0YzAgLjA0LS4wMS4xMS0uMDYuMTMgMCAwLTEuMjUuODktMy4zMS44OS0yLjQ5IDAtNS40NC0uNzgtNS40NC01LjkyUzIuNTggMS45OSA1LjEgMmMyLjE4IDAgMy4wNi40OSAzLjIuNTguMDQuMDUuMDYuMDkuMDYuMTRMNy45NCA0LjVjMCAuMDktLjA5LjItLjIuMTctLjM2LS4xMS0uOS0uMzMtMi4xNy0uMzMtMS40NyAwLTMuMDUuNDItMy4wNSAzLjczczEuNSAzLjcgMi41OCAzLjdjLjkyIDAgMS4yNS0uMTEgMS4yNS0uMTF2LTIuM0g0Ljg4Yy0uMTEgMC0uMTktLjA4LS4xOS0uMTdWNy4zNWMwLS4wOS4wOC0uMTcuMTktLjE3aDMuNzRjLjExIDAgLjE5LjA4LjE5LjE3Wm0zNS44NSAyLjMzYzAgMy40My0xLjExIDQuNDEtMy4wNSA0LjQxLTEuNjQgMC0yLjUyLS44My0yLjUyLS44M3MtLjA0LjQ2LS4wOS41MmMtLjAzLjA2LS4wOC4wOC0uMTQuMDhoLTEuNDhjLS4xIDAtLjE5LS4wOC0uMTktLjE3bC4wMi0xMS4xMWMwLS4wOS4wOC0uMTcuMTctLjE3aDIuMTNjLjA5IDAgLjE3LjA4LjE3LjE3djMuNzdzLjgyLS41MyAyLjAyLS41M2wtLjAxLS4wMmMxLjIgMCAyLjk3LjQ1IDIuOTcgMy44OFpNMjcuNjggMi40M2MuMDkgMCAuMTcuMDguMTcuMTd2MTEuMTFjMCAuMDktLjA4LjE3LS4xNy4xN2gtMi4xM2MtLjA5IDAtLjE3LS4wOC0uMTctLjE3bC4wMi00Ljc1aC0zLjMxdjQuNzVjMCAuMDktLjA4LjE3LS4xNy4xN2gtMi4xM2MtLjA4IDAtLjE3LS4wOC0uMTctLjE3VjIuNmMwLS4wOS4wOC0uMTcuMTctLjE3aDIuMTNjLjA5IDAgLjE3LjA4LjE3LjE3djQuMDloMy4zMVYyLjZjMC0uMDkuMDgtLjE3LjE3LS4xN1ptOC4yNiAzLjY0Yy4xMSAwIC4xOS4wOC4xOS4xN2wtLjAyIDcuNDdjMCAuMDktLjA2LjE3LS4xNy4xN0gzNC42Yy0uMDcgMC0uMTQtLjA0LS4xNi0uMDktLjAzLS4wNi0uMDgtLjQ1LS4wOC0uNDVzLTEuMTMuNzctMi41Mi43N2MtMS42OSAwLTIuOTItLjU1LTIuOTItMi43NVY2LjI1YzAtLjA5LjA4LS4xNy4xNy0uMTdoMi4xNGMuMDkgMCAuMTcuMDguMTcuMTdWMTFjMCAuNzUuMjIgMS4wOS45NyAxLjA5czEuMy0uMzkgMS4zLS4zOVY2LjI2YzAtLjExLjA2LS4xOS4xNy0uMTlabS0xNy40MDYgNS45NzFoLjAwNWEuMTc3LjE3NyAwIDAgMSAuMTQxLjE3OXYxLjVjMCAuMDctLjAzLjE0LS4wOS4xNi0uMS4wNS0uNzQuMjItMS4yNy4yMi0xLjE2IDAtMi44Ni0uMjUtMi44Ni0yLjY5VjguMTNoLTEuMTFjLS4wOSAwLS4xNy0uMDgtLjE3LS4xOVY2LjU4YzAtLjA4LjA1LS4xNS4xMy0uMTcuMDctLjAxIDEuMTYtLjI4IDEuMTYtLjI4VjMuOTZjMC0uMDguMDUtLjEzLjE0LS4xM2gyLjE2Yy4wOSAwIC4xNC4wNS4xNC4xM3YyLjExaDEuNTljLjA4IDAgLjE2LjA4LjE2LjE3djEuN2MwIC4xMS0uMDcuMTktLjE2LjE5aC0xLjU5djMuMTMxYzAgLjQ3LjI3LjgzIDEuMDUuODMuMjQ3IDAgLjQ4MS0uMDQ5LjU3NC0uMDVaTTEyLjI0IDYuMDZjLjA5IDAgLjE3LjA4LjE3LjE3djcuMzdjMCAuMTgtLjA1LjI3LS4yNS4yN2gtMS45MmMtLjE3IDAtLjMtLjA3LS4zLS4yN1Y2LjI2YzAtLjExLjA4LS4yLjE3LS4yWm0yOS45OSAzLjc4YzAtMS44MS0uNzMtMi4wNS0xLjUtMS45Ny0uNi4wNC0xLjA4LjM0LTEuMDguMzR2My41MnMuNDkuMzQgMS4yMi4zNmMxLjAzLjAzIDEuMzYtLjM0IDEuMzYtMi4yNVpNMTEuMTkgMi42OGMuNzUgMCAxLjM2LjYxIDEuMzYgMS4zOCAwIC43Ny0uNjEgMS4zOC0xLjM2IDEuMzgtLjc3IDAtMS4zOC0uNjEtMS4zOC0xLjM4IDAtLjc3LjYxLTEuMzggMS4zOC0xLjM4Wm03LjM0IDkuMzV2LjAwMWwuMDEuMDFoLS4wMDFsLS4wMDUtLjAwMXYuMDAxYy0uMDA5LS4wMDEtLjAxNS0uMDExLS4wMjQtLjAxMVoiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-logo-github .v-align-middle .d-none .d-md-inline-block}
![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDI1IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIzNyIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1sb2dvLWdpc3Qgdi1hbGlnbi1taWRkbGUgZC1ub25lIGQtbWQtaW5saW5lLWJsb2NrIj4KICAgIDxwYXRoIGQ9Ik00LjcgOC43M3YtMWgzLjUydjUuNjljLS43OC4zNy0xLjk1LjY0LTMuNTkuNjRDMS4xMSAxNC4wNiAwIDExLjM3IDAgOC4wMyAwIDQuNjkgMS4xMyAyIDQuNjMgMmMxLjYyIDAgMi42NC4zMyAzLjI4LjY2djEuMDVjLTEuMjItLjUtMi0uNzMtMy4yOC0uNzMtMi41NyAwLTMuNDggMi4yMS0zLjQ4IDUuMDYgMCAyLjg1LjkxIDUuMDUgMy40NyA1LjA1Ljg5IDAgMS45OC0uMDcgMi41My0uMzRWOC43M1ptMTAuOTguNjloLjAzYzIuMjIuMiAyLjc1Ljk1IDIuNzUgMi4yMyAwIDEuMjEtLjc2IDIuNDEtMy4xNCAyLjQxLS43NSAwLTEuODMtLjE5LTIuMzMtLjM5di0uOTRjLjQ3LjE3IDEuMjIuMzYgMi4zMy4zNiAxLjYyIDAgMi4wNi0uNjkgMi4wNi0xLjQyIDAtLjcxLS4yMi0xLjIxLTEuNzctMS4zNC0yLjI2LS4yLTIuNzMtMS0yLjczLTIuMDggMC0xLjExLjcyLTIuMzEgMi45Mi0yLjMxLjczIDAgMS41Ni4wOSAyLjI1LjM5di45NGMtLjYxLS4yLTEuMjItLjM2LTIuMjctLjM2LTEuNTUgMC0xLjg4LjU3LTEuODggMS4zNCAwIC42OS4yOCAxLjA0IDEuNzggMS4xN1ptOC41OC0zLjMzdi44NWgtMi40MnY0Ljg3YzAgLjk1LjUzIDEuMzQgMS41IDEuMzQuMiAwIC40MiAwIC42MS0uMDN2Ljg5Yy0uMTcuMDMtLjUuMDUtLjY5LjA1LTEuMzEgMC0yLjUtLjYtMi41LTIuMTN2LTVIMTkuMnYtLjQ4bDEuNTYtLjQ0VjMuOWwxLjA4LS4zMXYyLjVoMi40MlptLTEzLjE3LS4wM3Y2LjQxYzAgLjU0LjE5LjcuNjcuN3YuODljLTEuMTQgMC0xLjcyLS40Ny0xLjcyLTEuNzJWNi4wNmgxLjA1Wm0uMjUtMi4zM2MwIC40NC0uMzQuNzgtLjc4Ljc4YS43Ni43NiAwIDAgMS0uNzctLjc4YzAtLjQ0LjMyLS43OC43Ny0uNzhzLjc4LjM0Ljc4Ljc4WiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-logo-gist .v-align-middle .d-none .d-md-inline-block}](/){.Header-link hotkey="g d" aria-label="Gist Homepage "}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIyNCIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi10aHJlZS1iYXJzIj4KICAgIDxwYXRoIGQ9Ik0xIDIuNzVBLjc1Ljc1IDAgMCAxIDEuNzUgMmgxMi41YS43NS43NSAwIDAgMSAwIDEuNUgxLjc1QS43NS43NSAwIDAgMSAxIDIuNzVabTAgNUEuNzUuNzUgMCAwIDEgMS43NSA3aDEyLjVhLjc1Ljc1IDAgMCAxIDAgMS41SDEuNzVBLjc1Ljc1IDAgMCAxIDEgNy43NVpNMS43NSAxMmgxMi41YS43NS43NSAwIDAgMSAwIDEuNUgxLjc1YS43NS43NSAwIDAgMSAwLTEuNVoiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-three-bars}

[All gists](/discover){.Header-link .mr-0 .mr-md-3 .py-2 .py-md-0 .border-top .border-md-top-0 .border-white-fade ga-click="Header, go to all gists, text:all gists"}
[Back to GitHub](https://github.com){.Header-link .mr-0 .mr-md-3 .py-2 .py-md-0 .border-top .border-md-top-0 .border-white-fade ga-click="Header, go to GitHub, text:Back to GitHub"}
[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Flvaylet%2F90a7a9c56ee9f5fcfc78efec9b713b22){.Header-link .d-block .d-md-none .mr-0 .mr-md-3 .py-2 .py-md-0 .border-top .border-md-top-0 .border-white-fade ga-click="Header, sign in" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"gist header\",\"repository_id\":null,\"auth_type\":\"LOG_IN\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="f082abd7c09e2c48bcfa82587b5ad4c18187139b08d703648f327997f109033e"}
[Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Flvaylet%2F90a7a9c56ee9f5fcfc78efec9b713b22&source=header-gist){.Header-link .d-block .d-md-none .mr-0 .mr-md-3 .py-2 .py-md-0 .border-top .border-md-top-0 .border-white-fade ga-click="Header, sign up" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"gist header\",\"repository_id\":null,\"auth_type\":\"SIGN_UP\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="f0632b0b5785a895203ff8f80a2689bc4642ab1c76e727fcf2de58a7996d8113"}

[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIyNCIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1tYXJrLWdpdGh1YiB2LWFsaWduLW1pZGRsZSBkLWlubGluZS1ibG9jayBkLW1kLW5vbmUiPgogICAgPHBhdGggZD0iTTggMGM0LjQyIDAgOCAzLjU4IDggOGE4LjAxMyA4LjAxMyAwIDAgMS01LjQ1IDcuNTljLS40LjA4LS41NS0uMTctLjU1LS4zOCAwLS4yNy4wMS0xLjEzLjAxLTIuMiAwLS43NS0uMjUtMS4yMy0uNTQtMS40OCAxLjc4LS4yIDMuNjUtLjg4IDMuNjUtMy45NSAwLS44OC0uMzEtMS41OS0uODItMi4xNS4wOC0uMi4zNi0xLjAyLS4wOC0yLjEyIDAgMC0uNjctLjIyLTIuMi44Mi0uNjQtLjE4LTEuMzItLjI3LTItLjI3LS42OCAwLTEuMzYuMDktMiAuMjctMS41My0xLjAzLTIuMi0uODItMi4yLS44Mi0uNDQgMS4xLS4xNiAxLjkyLS4wOCAyLjEyLS41MS41Ni0uODIgMS4yOC0uODIgMi4xNSAwIDMuMDYgMS44NiAzLjc1IDMuNjQgMy45NS0uMjMuMi0uNDQuNTUtLjUxIDEuMDctLjQ2LjIxLTEuNjEuNTUtMi4zMy0uNjYtLjE1LS4yNC0uNi0uODMtMS4yMy0uODItLjY3LjAxLS4yNy4zOC4wMS41My4zNC4xOS43My45LjgyIDEuMTMuMTYuNDUuNjggMS4zMSAyLjY5Ljk0IDAgLjY3LjAxIDEuMy4wMSAxLjQ5IDAgLjIxLS4xNS40NS0uNTUuMzhBNy45OTUgNy45OTUgMCAwIDEgMCA4YzAtNC40MiAzLjU4LTggOC04WiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-mark-github .v-align-middle .d-inline-block .d-md-none}
![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDQ1IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSI2NyIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1sb2dvLWdpdGh1YiB2LWFsaWduLW1pZGRsZSBkLW5vbmUgZC1tZC1pbmxpbmUtYmxvY2siPgogICAgPHBhdGggZD0iTTguODEgNy4zNXY1Ljc0YzAgLjA0LS4wMS4xMS0uMDYuMTMgMCAwLTEuMjUuODktMy4zMS44OS0yLjQ5IDAtNS40NC0uNzgtNS40NC01LjkyUzIuNTggMS45OSA1LjEgMmMyLjE4IDAgMy4wNi40OSAzLjIuNTguMDQuMDUuMDYuMDkuMDYuMTRMNy45NCA0LjVjMCAuMDktLjA5LjItLjIuMTctLjM2LS4xMS0uOS0uMzMtMi4xNy0uMzMtMS40NyAwLTMuMDUuNDItMy4wNSAzLjczczEuNSAzLjcgMi41OCAzLjdjLjkyIDAgMS4yNS0uMTEgMS4yNS0uMTF2LTIuM0g0Ljg4Yy0uMTEgMC0uMTktLjA4LS4xOS0uMTdWNy4zNWMwLS4wOS4wOC0uMTcuMTktLjE3aDMuNzRjLjExIDAgLjE5LjA4LjE5LjE3Wm0zNS44NSAyLjMzYzAgMy40My0xLjExIDQuNDEtMy4wNSA0LjQxLTEuNjQgMC0yLjUyLS44My0yLjUyLS44M3MtLjA0LjQ2LS4wOS41MmMtLjAzLjA2LS4wOC4wOC0uMTQuMDhoLTEuNDhjLS4xIDAtLjE5LS4wOC0uMTktLjE3bC4wMi0xMS4xMWMwLS4wOS4wOC0uMTcuMTctLjE3aDIuMTNjLjA5IDAgLjE3LjA4LjE3LjE3djMuNzdzLjgyLS41MyAyLjAyLS41M2wtLjAxLS4wMmMxLjIgMCAyLjk3LjQ1IDIuOTcgMy44OFpNMjcuNjggMi40M2MuMDkgMCAuMTcuMDguMTcuMTd2MTEuMTFjMCAuMDktLjA4LjE3LS4xNy4xN2gtMi4xM2MtLjA5IDAtLjE3LS4wOC0uMTctLjE3bC4wMi00Ljc1aC0zLjMxdjQuNzVjMCAuMDktLjA4LjE3LS4xNy4xN2gtMi4xM2MtLjA4IDAtLjE3LS4wOC0uMTctLjE3VjIuNmMwLS4wOS4wOC0uMTcuMTctLjE3aDIuMTNjLjA5IDAgLjE3LjA4LjE3LjE3djQuMDloMy4zMVYyLjZjMC0uMDkuMDgtLjE3LjE3LS4xN1ptOC4yNiAzLjY0Yy4xMSAwIC4xOS4wOC4xOS4xN2wtLjAyIDcuNDdjMCAuMDktLjA2LjE3LS4xNy4xN0gzNC42Yy0uMDcgMC0uMTQtLjA0LS4xNi0uMDktLjAzLS4wNi0uMDgtLjQ1LS4wOC0uNDVzLTEuMTMuNzctMi41Mi43N2MtMS42OSAwLTIuOTItLjU1LTIuOTItMi43NVY2LjI1YzAtLjA5LjA4LS4xNy4xNy0uMTdoMi4xNGMuMDkgMCAuMTcuMDguMTcuMTdWMTFjMCAuNzUuMjIgMS4wOS45NyAxLjA5czEuMy0uMzkgMS4zLS4zOVY2LjI2YzAtLjExLjA2LS4xOS4xNy0uMTlabS0xNy40MDYgNS45NzFoLjAwNWEuMTc3LjE3NyAwIDAgMSAuMTQxLjE3OXYxLjVjMCAuMDctLjAzLjE0LS4wOS4xNi0uMS4wNS0uNzQuMjItMS4yNy4yMi0xLjE2IDAtMi44Ni0uMjUtMi44Ni0yLjY5VjguMTNoLTEuMTFjLS4wOSAwLS4xNy0uMDgtLjE3LS4xOVY2LjU4YzAtLjA4LjA1LS4xNS4xMy0uMTcuMDctLjAxIDEuMTYtLjI4IDEuMTYtLjI4VjMuOTZjMC0uMDguMDUtLjEzLjE0LS4xM2gyLjE2Yy4wOSAwIC4xNC4wNS4xNC4xM3YyLjExaDEuNTljLjA4IDAgLjE2LjA4LjE2LjE3djEuN2MwIC4xMS0uMDcuMTktLjE2LjE5aC0xLjU5djMuMTMxYzAgLjQ3LjI3LjgzIDEuMDUuODMuMjQ3IDAgLjQ4MS0uMDQ5LjU3NC0uMDVaTTEyLjI0IDYuMDZjLjA5IDAgLjE3LjA4LjE3LjE3djcuMzdjMCAuMTgtLjA1LjI3LS4yNS4yN2gtMS45MmMtLjE3IDAtLjMtLjA3LS4zLS4yN1Y2LjI2YzAtLjExLjA4LS4yLjE3LS4yWm0yOS45OSAzLjc4YzAtMS44MS0uNzMtMi4wNS0xLjUtMS45Ny0uNi4wNC0xLjA4LjM0LTEuMDguMzR2My41MnMuNDkuMzQgMS4yMi4zNmMxLjAzLjAzIDEuMzYtLjM0IDEuMzYtMi4yNVpNMTEuMTkgMi42OGMuNzUgMCAxLjM2LjYxIDEuMzYgMS4zOCAwIC43Ny0uNjEgMS4zOC0xLjM2IDEuMzgtLjc3IDAtMS4zOC0uNjEtMS4zOC0xLjM4IDAtLjc3LjYxLTEuMzggMS4zOC0xLjM4Wm03LjM0IDkuMzV2LjAwMWwuMDEuMDFoLS4wMDFsLS4wMDUtLjAwMXYuMDAxYy0uMDA5LS4wMDEtLjAxNS0uMDExLS4wMjQtLjAxMVoiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-logo-github .v-align-middle .d-none .d-md-inline-block}
![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDI1IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIzNyIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1sb2dvLWdpc3Qgdi1hbGlnbi1taWRkbGUgZC1ub25lIGQtbWQtaW5saW5lLWJsb2NrIj4KICAgIDxwYXRoIGQ9Ik00LjcgOC43M3YtMWgzLjUydjUuNjljLS43OC4zNy0xLjk1LjY0LTMuNTkuNjRDMS4xMSAxNC4wNiAwIDExLjM3IDAgOC4wMyAwIDQuNjkgMS4xMyAyIDQuNjMgMmMxLjYyIDAgMi42NC4zMyAzLjI4LjY2djEuMDVjLTEuMjItLjUtMi0uNzMtMy4yOC0uNzMtMi41NyAwLTMuNDggMi4yMS0zLjQ4IDUuMDYgMCAyLjg1LjkxIDUuMDUgMy40NyA1LjA1Ljg5IDAgMS45OC0uMDcgMi41My0uMzRWOC43M1ptMTAuOTguNjloLjAzYzIuMjIuMiAyLjc1Ljk1IDIuNzUgMi4yMyAwIDEuMjEtLjc2IDIuNDEtMy4xNCAyLjQxLS43NSAwLTEuODMtLjE5LTIuMzMtLjM5di0uOTRjLjQ3LjE3IDEuMjIuMzYgMi4zMy4zNiAxLjYyIDAgMi4wNi0uNjkgMi4wNi0xLjQyIDAtLjcxLS4yMi0xLjIxLTEuNzctMS4zNC0yLjI2LS4yLTIuNzMtMS0yLjczLTIuMDggMC0xLjExLjcyLTIuMzEgMi45Mi0yLjMxLjczIDAgMS41Ni4wOSAyLjI1LjM5di45NGMtLjYxLS4yLTEuMjItLjM2LTIuMjctLjM2LTEuNTUgMC0xLjg4LjU3LTEuODggMS4zNCAwIC42OS4yOCAxLjA0IDEuNzggMS4xN1ptOC41OC0zLjMzdi44NWgtMi40MnY0Ljg3YzAgLjk1LjUzIDEuMzQgMS41IDEuMzQuMiAwIC40MiAwIC42MS0uMDN2Ljg5Yy0uMTcuMDMtLjUuMDUtLjY5LjA1LTEuMzEgMC0yLjUtLjYtMi41LTIuMTN2LTVIMTkuMnYtLjQ4bDEuNTYtLjQ0VjMuOWwxLjA4LS4zMXYyLjVoMi40MlptLTEzLjE3LS4wM3Y2LjQxYzAgLjU0LjE5LjcuNjcuN3YuODljLTEuMTQgMC0xLjcyLS40Ny0xLjcyLTEuNzJWNi4wNmgxLjA1Wm0uMjUtMi4zM2MwIC40NC0uMzQuNzgtLjc4Ljc4YS43Ni43NiAwIDAgMS0uNzctLjc4YzAtLjQ0LjMyLS43OC43Ny0uNzhzLjc4LjM0Ljc4Ljc4WiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-logo-gist .v-align-middle .d-none .d-md-inline-block}](/){.Header-link hotkey="g d" aria-label="Gist Homepage "}

[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Flvaylet%2F90a7a9c56ee9f5fcfc78efec9b713b22){.Header-link .no-underline .mr-3 ga-click="Header, sign in" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"gist header\",\"repository_id\":null,\"auth_type\":\"LOG_IN\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="f082abd7c09e2c48bcfa82587b5ad4c18187139b08d703648f327997f109033e"}
[Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Flvaylet%2F90a7a9c56ee9f5fcfc78efec9b713b22&source=header-gist){.Header-link .d-inline-block .no-underline .border .color-border-default .rounded .px-2 .py-1 ga-click="Header, sign up" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"gist header\",\"repository_id\":null,\"auth_type\":\"SIGN_UP\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="f0632b0b5785a895203ff8f80a2689bc4642ab1c76e727fcf2de58a7996d8113"}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1hbGVydCI+CiAgICA8cGF0aCBkPSJNNi40NTcgMS4wNDdjLjY1OS0xLjIzNCAyLjQyNy0xLjIzNCAzLjA4NiAwbDYuMDgyIDExLjM3OEExLjc1IDEuNzUgMCAwIDEgMTQuMDgyIDE1SDEuOTE4YTEuNzUgMS43NSAwIDAgMS0xLjU0My0yLjU3NVptMS43NjMuNzA3YS4yNS4yNSAwIDAgMC0uNDQgMEwxLjY5OCAxMy4xMzJhLjI1LjI1IDAgMCAwIC4yMi4zNjhoMTIuMTY0YS4yNS4yNSAwIDAgMCAuMjItLjM2OFptLjUzIDMuOTk2djIuNWEuNzUuNzUgMCAwIDEtMS41IDB2LTIuNWEuNzUuNzUgMCAwIDEgMS41IDBaTTkgMTFhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-alert}
You signed in with another tab or window. [Reload](){.Link--inTextBlock} to refresh your session.
You signed out in another tab or window. [Reload](){.Link--inTextBlock} to refresh your session.
You switched accounts on another tab or window. [Reload](){.Link--inTextBlock} to refresh your session.

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi14IEJ1dHRvbi12aXN1YWwiPgogICAgPHBhdGggZD0iTTMuNzIgMy43MmEuNzUuNzUgMCAwIDEgMS4wNiAwTDggNi45NGwzLjIyLTMuMjJhLjc0OS43NDkgMCAwIDEgMS4yNzUuMzI2Ljc0OS43NDkgMCAwIDEtLjIxNS43MzRMOS4wNiA4bDMuMjIgMy4yMmEuNzQ5Ljc0OSAwIDAgMS0uMzI2IDEuMjc1Ljc0OS43NDkgMCAwIDEtLjczNC0uMjE1TDggOS4wNmwtMy4yMiAzLjIyYS43NTEuNzUxIDAgMCAxLTEuMDQyLS4wMTguNzUxLjc1MSAwIDAgMS0uMDE4LTEuMDQyTDYuOTQgOCAzLjcyIDQuNzhhLjc1Ljc1IDAgMCAxIDAtMS4wNloiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-x .Button-visual}

Dismiss alert

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi14Ij4KICAgIDxwYXRoIGQ9Ik0zLjcyIDMuNzJhLjc1Ljc1IDAgMCAxIDEuMDYgMEw4IDYuOTRsMy4yMi0zLjIyYS43NDkuNzQ5IDAgMCAxIDEuMjc1LjMyNi43NDkuNzQ5IDAgMCAxLS4yMTUuNzM0TDkuMDYgOGwzLjIyIDMuMjJhLjc0OS43NDkgMCAwIDEtLjMyNiAxLjI3NS43NDkuNzQ5IDAgMCAxLS43MzQtLjIxNUw4IDkuMDZsLTMuMjIgMy4yMmEuNzUxLjc1MSAwIDAgMS0xLjA0Mi0uMDE4Ljc1MS43NTEgMCAwIDEtLjAxOC0xLjA0Mkw2Ljk0IDggMy43MiA0Ljc4YS43NS43NSAwIDAgMSAwLTEuMDZaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-x}

{{ message }}

Instantly share code, notes, and snippets.

[![\@lvaylet](https://avatars.githubusercontent.com/u/10340090?s=64&v=4){.avatar .avatar-user width="32" height="32"}](/lvaylet){.mr-2 .flex-shrink-0 hovercard-type="user" hovercard-url="/users/lvaylet/hovercard" octo-click="hovercard-link-click" octo-dimensions="link_type:self"}

# [lvaylet](/lvaylet){hovercard-type="user" hovercard-url="/users/lvaylet/hovercard" octo-click="hovercard-link-click" octo-dimensions="link_type:self"}/**[main.tf](/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22)** {#lvayletmain.tf .wb-break-word .f3 .text-normal .mb-md-0 .mb-1}

Created
February 18, 2020 21:30

-   [![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1zdGFyIj4KICAgIDxwYXRoIGQ9Ik04IC4yNWEuNzUuNzUgMCAwIDEgLjY3My40MThsMS44ODIgMy44MTUgNC4yMS42MTJhLjc1Ljc1IDAgMCAxIC40MTYgMS4yNzlsLTMuMDQ2IDIuOTcuNzE5IDQuMTkyYS43NTEuNzUxIDAgMCAxLTEuMDg4Ljc5MUw4IDEyLjM0N2wtMy43NjYgMS45OGEuNzUuNzUgMCAwIDEtMS4wODgtLjc5bC43Mi00LjE5NEwuODE4IDYuMzc0YS43NS43NSAwIDAgMSAuNDE2LTEuMjhsNC4yMS0uNjExTDcuMzI3LjY2OEEuNzUuNzUgMCAwIDEgOCAuMjVabTAgMi40NDVMNi42MTUgNS41YS43NS43NSAwIDAgMS0uNTY0LjQxbC0zLjA5Ny40NSAyLjI0IDIuMTg0YS43NS43NSAwIDAgMSAuMjE2LjY2NGwtLjUyOCAzLjA4NCAyLjc2OS0xLjQ1NmEuNzUuNzUgMCAwIDEgLjY5OCAwbDIuNzcgMS40NTYtLjUzLTMuMDg0YS43NS43NSAwIDAgMSAuMjE2LS42NjRsMi4yNC0yLjE4My0zLjA5Ni0uNDVhLjc1Ljc1IDAgMCAxLS41NjQtLjQxTDggMi42OTRaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-star}
    Star
    1](/login?return_to=https%3A%2F%2Fgist.github.com%2Flvaylet%2F90a7a9c56ee9f5fcfc78efec9b713b22){#gist-star-button-count .btn-with-count .Button--secondary .Button--small .Button rel="nofollow" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"gist star button\",\"repository_id\":null,\"auth_type\":\"LOG_IN\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="634fab7fdc0adaaae69835d9a9440faf1056774ee9032ce5f164f67b2d84b9a0" view-component="true"}
    You must be signed in to star a gist
-   [![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1yZXBvLWZvcmtlZCI+CiAgICA8cGF0aCBkPSJNNSA1LjM3MnYuODc4YzAgLjQxNC4zMzYuNzUuNzUuNzVoNC41YS43NS43NSAwIDAgMCAuNzUtLjc1di0uODc4YTIuMjUgMi4yNSAwIDEgMSAxLjUgMHYuODc4YTIuMjUgMi4yNSAwIDAgMS0yLjI1IDIuMjVoLTEuNXYyLjEyOGEyLjI1MSAyLjI1MSAwIDEgMS0xLjUgMFY4LjVoLTEuNUEyLjI1IDIuMjUgMCAwIDEgMy41IDYuMjV2LS44NzhhMi4yNSAyLjI1IDAgMSAxIDEuNSAwWk01IDMuMjVhLjc1Ljc1IDAgMSAwLTEuNSAwIC43NS43NSAwIDAgMCAxLjUgMFptNi43NS43NWEuNzUuNzUgMCAxIDAgMC0xLjUuNzUuNzUgMCAwIDAgMCAxLjVabS0zIDguNzVhLjc1Ljc1IDAgMSAwLTEuNSAwIC43NS43NSAwIDAgMCAxLjUgMFoiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-repo-forked}
    Fork
    1](/login?return_to=https%3A%2F%2Fgist.github.com%2Flvaylet%2F90a7a9c56ee9f5fcfc78efec9b713b22){#gist-fork-button .btn-with-count .Button--secondary .Button--small .Button rel="nofollow" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"gist fork button\",\"repository_id\":null,\"auth_type\":\"LOG_IN\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="2d1b903b4e244f4b7d72e399e335f4578bdee63be89a25189d05693eab3d537c" view-component="true"}
    You must be signed in to fork a gist

[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1zdGFyIj4KICAgIDxwYXRoIGQ9Ik04IC4yNWEuNzUuNzUgMCAwIDEgLjY3My40MThsMS44ODIgMy44MTUgNC4yMS42MTJhLjc1Ljc1IDAgMCAxIC40MTYgMS4yNzlsLTMuMDQ2IDIuOTcuNzE5IDQuMTkyYS43NTEuNzUxIDAgMCAxLTEuMDg4Ljc5MUw4IDEyLjM0N2wtMy43NjYgMS45OGEuNzUuNzUgMCAwIDEtMS4wODgtLjc5bC43Mi00LjE5NEwuODE4IDYuMzc0YS43NS43NSAwIDAgMSAuNDE2LTEuMjhsNC4yMS0uNjExTDcuMzI3LjY2OEEuNzUuNzUgMCAwIDEgOCAuMjVabTAgMi40NDVMNi42MTUgNS41YS43NS43NSAwIDAgMS0uNTY0LjQxbC0zLjA5Ny40NSAyLjI0IDIuMTg0YS43NS43NSAwIDAgMSAuMjE2LjY2NGwtLjUyOCAzLjA4NCAyLjc2OS0xLjQ1NmEuNzUuNzUgMCAwIDEgLjY5OCAwbDIuNzcgMS40NTYtLjUzLTMuMDg0YS43NS43NSAwIDAgMSAuMjE2LS42NjRsMi4yNC0yLjE4My0zLjA5Ni0uNDVhLjc1Ljc1IDAgMCAxLS41NjQtLjQxTDggMi42OTRaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-star}
Star](/login?return_to=https%3A%2F%2Fgist.github.com%2Flvaylet%2F90a7a9c56ee9f5fcfc78efec9b713b22){#gist-star-button-no-count .btn-with-count .Button--secondary .Button--small .Button rel="nofollow" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"gist star button\",\"repository_id\":null,\"auth_type\":\"LOG_IN\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="634fab7fdc0adaaae69835d9a9440faf1056774ee9032ce5f164f67b2d84b9a0" view-component="true"}
You must be signed in to star a gist

[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jb2RlIFVuZGVybGluZU5hdi1vY3RpY29uIj4KICAgIDxwYXRoIGQ9Im0xMS4yOCAzLjIyIDQuMjUgNC4yNWEuNzUuNzUgMCAwIDEgMCAxLjA2bC00LjI1IDQuMjVhLjc0OS43NDkgMCAwIDEtMS4yNzUtLjMyNi43NDkuNzQ5IDAgMCAxIC4yMTUtLjczNEwxMy45NCA4bC0zLjcyLTMuNzJhLjc0OS43NDkgMCAwIDEgLjMyNi0xLjI3NS43NDkuNzQ5IDAgMCAxIC43MzQuMjE1Wm0tNi41NiAwYS43NTEuNzUxIDAgMCAxIDEuMDQyLjAxOC43NTEuNzUxIDAgMCAxIC4wMTggMS4wNDJMMi4wNiA4bDMuNzIgMy43MmEuNzQ5Ljc0OSAwIDAgMS0uMzI2IDEuMjc1Ljc0OS43NDkgMCAwIDEtLjczNC0uMjE1TC40NyA4LjUzYS43NS43NSAwIDAgMSAwLTEuMDZaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-code .UnderlineNav-octicon}
Code](/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22){.js-selected-navigation-item .selected .UnderlineNav-item pjax="true" hotkey="g c" aria-current="page" selected-links="gist_code /lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22"}
[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1naXQtY29tbWl0IFVuZGVybGluZU5hdi1vY3RpY29uIj4KICAgIDxwYXRoIGQ9Ik0xMS45MyA4LjVhNC4wMDIgNC4wMDIgMCAwIDEtNy44NiAwSC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoMy4zMmE0LjAwMiA0LjAwMiAwIDAgMSA3Ljg2IDBoMy4zMmEuNzUuNzUgMCAwIDEgMCAxLjVabS0xLjQzLS43NWEyLjUgMi41IDAgMSAwLTUgMCAyLjUgMi41IDAgMCAwIDUgMFoiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-git-commit .UnderlineNav-octicon}
Revisions
1](/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22/revisions){.js-selected-navigation-item .UnderlineNav-item pjax="true" hotkey="g r" selected-links="gist_revisions /lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22/revisions"}
[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1zdGFyIFVuZGVybGluZU5hdi1vY3RpY29uIj4KICAgIDxwYXRoIGQ9Ik04IC4yNWEuNzUuNzUgMCAwIDEgLjY3My40MThsMS44ODIgMy44MTUgNC4yMS42MTJhLjc1Ljc1IDAgMCAxIC40MTYgMS4yNzlsLTMuMDQ2IDIuOTcuNzE5IDQuMTkyYS43NTEuNzUxIDAgMCAxLTEuMDg4Ljc5MUw4IDEyLjM0N2wtMy43NjYgMS45OGEuNzUuNzUgMCAwIDEtMS4wODgtLjc5bC43Mi00LjE5NEwuODE4IDYuMzc0YS43NS43NSAwIDAgMSAuNDE2LTEuMjhsNC4yMS0uNjExTDcuMzI3LjY2OEEuNzUuNzUgMCAwIDEgOCAuMjVabTAgMi40NDVMNi42MTUgNS41YS43NS43NSAwIDAgMS0uNTY0LjQxbC0zLjA5Ny40NSAyLjI0IDIuMTg0YS43NS43NSAwIDAgMSAuMjE2LjY2NGwtLjUyOCAzLjA4NCAyLjc2OS0xLjQ1NmEuNzUuNzUgMCAwIDEgLjY5OCAwbDIuNzcgMS40NTYtLjUzLTMuMDg0YS43NS43NSAwIDAgMSAuMjE2LS42NjRsMi4yNC0yLjE4My0zLjA5Ni0uNDVhLjc1Ljc1IDAgMCAxLS41NjQtLjQxTDggMi42OTRaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-star .UnderlineNav-octicon}
Stars
1](/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22/stargazers){.js-selected-navigation-item .UnderlineNav-item pjax="true" hotkey="g s" selected-links="gist_stars /lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22/stargazers"}
[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1naXQtYnJhbmNoIFVuZGVybGluZU5hdi1vY3RpY29uIj4KICAgIDxwYXRoIGQ9Ik05LjUgMy4yNWEyLjI1IDIuMjUgMCAxIDEgMyAyLjEyMlY2QTIuNSAyLjUgMCAwIDEgMTAgOC41SDZhMSAxIDAgMCAwLTEgMXYxLjEyOGEyLjI1MSAyLjI1MSAwIDEgMS0xLjUgMFY1LjM3MmEyLjI1IDIuMjUgMCAxIDEgMS41IDB2MS44MzZBMi40OTMgMi40OTMgMCAwIDEgNiA3aDRhMSAxIDAgMCAwIDEtMXYtLjYyOEEyLjI1IDIuMjUgMCAwIDEgOS41IDMuMjVabS02IDBhLjc1Ljc1IDAgMSAwIDEuNSAwIC43NS43NSAwIDAgMC0xLjUgMFptOC4yNS0uNzVhLjc1Ljc1IDAgMSAwIDAgMS41Ljc1Ljc1IDAgMCAwIDAtMS41Wk00LjI1IDEyYS43NS43NSAwIDEgMCAwIDEuNS43NS43NSAwIDAgMCAwLTEuNVoiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-git-branch .UnderlineNav-octicon}
Forks
1](/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22/forks){.js-selected-navigation-item .UnderlineNav-item pjax="true" hotkey="g f" selected-links="gist_forks /lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22/forks"}

Embed

What would you like to do?

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jaGVjayBzZWxlY3QtbWVudS1pdGVtLWljb24iPgogICAgPHBhdGggZD0iTTEzLjc4IDQuMjJhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNy4yNSA3LjI1YS43NS43NSAwIDAgMS0xLjA2IDBMMi4yMiA5LjI4YS43NTEuNzUxIDAgMCAxIC4wMTgtMS4wNDIuNzUxLjc1MSAwIDAgMSAxLjA0Mi0uMDE4TDYgMTAuOTRsNi43Mi02LjcyYS43NS43NSAwIDAgMSAxLjA2IDBaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-check .select-menu-item-icon}

Embed
Embed this gist in your website.

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jaGVjayBzZWxlY3QtbWVudS1pdGVtLWljb24iPgogICAgPHBhdGggZD0iTTEzLjc4IDQuMjJhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNy4yNSA3LjI1YS43NS43NSAwIDAgMS0xLjA2IDBMMi4yMiA5LjI4YS43NTEuNzUxIDAgMCAxIC4wMTgtMS4wNDIuNzUxLjc1MSAwIDAgMSAxLjA0Mi0uMDE4TDYgMTAuOTRsNi43Mi02LjcyYS43NS43NSAwIDAgMSAxLjA2IDBaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-check .select-menu-item-icon}

Share
Copy sharable link for this gist.

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jaGVjayBzZWxlY3QtbWVudS1pdGVtLWljb24iPgogICAgPHBhdGggZD0iTTEzLjc4IDQuMjJhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNy4yNSA3LjI1YS43NS43NSAwIDAgMS0xLjA2IDBMMi4yMiA5LjI4YS43NTEuNzUxIDAgMCAxIC4wMTgtMS4wNDIuNzUxLjc1MSAwIDAgMSAxLjA0Mi0uMDE4TDYgMTAuOTRsNi43Mi02LjcyYS43NS43NSAwIDAgMSAxLjA2IDBaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-check .select-menu-item-icon}

Clone via
HTTPS
Clone with Git or checkout with SVN using the repository's web address.

[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1xdWVzdGlvbiBzZWxlY3QtbWVudS1pdGVtLWljb24iPgogICAgPHBhdGggZD0iTTAgOGE4IDggMCAxIDEgMTYgMEE4IDggMCAwIDEgMCA4Wm04LTYuNWE2LjUgNi41IDAgMSAwIDAgMTMgNi41IDYuNSAwIDAgMCAwLTEzWk02LjkyIDYuMDg1aC4wMDFhLjc0OS43NDkgMCAxIDEtMS4zNDItLjY3Yy4xNjktLjMzOS40MzYtLjcwMS44NDktLjk3N0M2Ljg0NSA0LjE2IDcuMzY5IDQgOCA0YTIuNzU2IDIuNzU2IDAgMCAxIDEuNjM3LjUyNWMuNTAzLjM3Ny44NjMuOTY1Ljg2MyAxLjcyNSAwIC40NDgtLjExNS44My0uMzI5IDEuMTUtLjIwNS4zMDctLjQ3LjUxMy0uNjkyLjY2Mi0uMTA5LjA3Mi0uMjIuMTM4LS4zMTMuMTk1bC0uMDA2LjAwNGE2LjI0IDYuMjQgMCAwIDAtLjI2LjE2Ljk1Mi45NTIgMCAwIDAtLjI3Ni4yNDUuNzUuNzUgMCAwIDEtMS4yNDgtLjgzMmMuMTg0LS4yNjQuNDItLjQ4OS42OTItLjY2MS4xMDMtLjA2Ny4yMDctLjEzMi4zMTMtLjE5NWwuMDA3LS4wMDRjLjEtLjA2MS4xODItLjExLjI1OC0uMTYxYS45NjkuOTY5IDAgMCAwIC4yNzctLjI0NUM4Ljk2IDYuNTE0IDkgNi40MjcgOSA2LjI1YS42MTIuNjEyIDAgMCAwLS4yNjItLjUyNUExLjI3IDEuMjcgMCAwIDAgOCA1LjVjLS4zNjkgMC0uNTk1LjA5LS43NC4xODdhMS4wMSAxLjAxIDAgMCAwLS4zNC4zOThaTTkgMTFhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-question .select-menu-item-icon}](https://docs.github.com/articles/which-remote-url-should-i-use){.select-menu-item .select-menu-action role="link" target="_blank" rel="noopener noreferrer"}

Learn more about clone URLs

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jb3B5Ij4KICAgIDxwYXRoIGQ9Ik0wIDYuNzVDMCA1Ljc4NC43ODQgNSAxLjc1IDVoMS41YS43NS43NSAwIDAgMSAwIDEuNWgtMS41YS4yNS4yNSAwIDAgMC0uMjUuMjV2Ny41YzAgLjEzOC4xMTIuMjUuMjUuMjVoNy41YS4yNS4yNSAwIDAgMCAuMjUtLjI1di0xLjVhLjc1Ljc1IDAgMCAxIDEuNSAwdjEuNUExLjc1IDEuNzUgMCAwIDEgOS4yNSAxNmgtNy41QTEuNzUgMS43NSAwIDAgMSAwIDE0LjI1WiI+PC9wYXRoPjxwYXRoIGQ9Ik01IDEuNzVDNSAuNzg0IDUuNzg0IDAgNi43NSAwaDcuNUMxNS4yMTYgMCAxNiAuNzg0IDE2IDEuNzV2Ny41QTEuNzUgMS43NSAwIDAgMSAxNC4yNSAxMWgtNy41QTEuNzUgMS43NSAwIDAgMSA1IDkuMjVabTEuNzUtLjI1YS4yNS4yNSAwIDAgMC0uMjUuMjV2Ny41YzAgLjEzOC4xMTIuMjUuMjUuMjVoNy41YS4yNS4yNSAwIDAgMCAuMjUtLjI1di03LjVhLjI1LjI1IDAgMCAwLS4yNS0uMjVaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-copy}

[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1kZXNrdG9wLWRvd25sb2FkIj4KICAgIDxwYXRoIGQ9Im00LjkyNyA1LjQyNyAyLjg5NiAyLjg5NmEuMjUuMjUgMCAwIDAgLjM1NCAwbDIuODk2LTIuODk2QS4yNS4yNSAwIDAgMCAxMC44OTYgNUg4Ljc1Vi43NWEuNzUuNzUgMCAxIDAtMS41IDBWNUg1LjEwNGEuMjUuMjUgMCAwIDAtLjE3Ny40MjdaIj48L3BhdGg+PHBhdGggZD0iTTEuNTczIDIuNTczYS4yNS4yNSAwIDAgMC0uMDczLjE3N3Y3LjVhLjI1LjI1IDAgMCAwIC4yNS4yNWgxMi41YS4yNS4yNSAwIDAgMCAuMjUtLjI1di03LjVhLjI1LjI1IDAgMCAwLS4yNS0uMjVoLTNhLjc1Ljc1IDAgMSAxIDAtMS41aDNBMS43NSAxLjc1IDAgMCAxIDE2IDIuNzV2Ny41QTEuNzUgMS43NSAwIDAgMSAxNC4yNSAxMmgtMy43MjdjLjA5OSAxLjA0MS41MiAxLjg3MiAxLjI5MiAyLjc1N0EuNzUuNzUgMCAwIDEgMTEuMjUgMTZoLTYuNWEuNzUuNzUgMCAwIDEtLjU2NS0xLjI0M2MuNzcyLS44ODUgMS4xOTItMS43MTYgMS4yOTItMi43NTdIMS43NUExLjc1IDEuNzUgMCAwIDEgMCAxMC4yNXYtNy41QTEuNzUgMS43NSAwIDAgMSAxLjc1IDFoM2EuNzUuNzUgMCAwIDEgMCAxLjVoLTNhLjI1LjI1IDAgMCAwLS4xNzcuMDczWk02Ljk4MiAxMmE1LjcyIDUuNzIgMCAwIDEtLjc2NSAyLjVoMy41NjZhNS43MiA1LjcyIDAgMCAxLS43NjUtMi41SDYuOTgyWiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-desktop-download}](https://desktop.github.com){.btn .btn-sm .tooltipped .tooltipped-s .tooltipped-multiline .js-remove-unless-platform platforms="windows,mac" aria-label="Save lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22 to your computer and use it in GitHub Desktop." hydro-click="{\"event_type\":\"clone_or_download.click\",\"payload\":{\"feature_clicked\":\"OPEN_IN_DESKTOP\",\"git_repository_type\":\"GIST\",\"gist_id\":101293760,\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="a398ded03389a8836ba193e01e311c946d875d559dec08c61b18298d82653ea2"}

[Download ZIP](/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22/archive/29a104b5a01ab65f3daa04c04baef2adf6f47cc8.zip){.btn .btn-sm rel="nofollow" hydro-click="{\"event_type\":\"clone_or_download.click\",\"payload\":{\"feature_clicked\":\"DOWNLOAD_ZIP\",\"git_repository_type\":\"GIST\",\"gist_id\":101293760,\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="fd03fed350b98eafc3537918331a1dd7b9ceaeb743bc881894c8bdd4e423eb37" ga-click="Gist, download zip, location:gist overview"}

Terraform 12 - for_each with list of objects

[Raw](/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22/raw/29a104b5a01ab65f3daa04c04baef2adf6f47cc8/main.tf){.Button--secondary .Button--small .Button view-component="true"}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jb2RlLXNxdWFyZSBjb2xvci1mZy1tdXRlZCI+CiAgICA8cGF0aCBkPSJNMCAxLjc1QzAgLjc4NC43ODQgMCAxLjc1IDBoMTIuNUMxNS4yMTYgMCAxNiAuNzg0IDE2IDEuNzV2MTIuNUExLjc1IDEuNzUgMCAwIDEgMTQuMjUgMTZIMS43NUExLjc1IDEuNzUgMCAwIDEgMCAxNC4yNVptMS43NS0uMjVhLjI1LjI1IDAgMCAwLS4yNS4yNXYxMi41YzAgLjEzOC4xMTIuMjUuMjUuMjVoMTIuNWEuMjUuMjUgMCAwIDAgLjI1LS4yNVYxLjc1YS4yNS4yNSAwIDAgMC0uMjUtLjI1Wm03LjQ3IDMuOTdhLjc1Ljc1IDAgMCAxIDEuMDYgMGwyIDJhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtMiAyYS43NDkuNzQ5IDAgMCAxLTEuMjc1LS4zMjYuNzQ5Ljc0OSAwIDAgMSAuMjE1LS43MzRMMTAuNjkgOCA5LjIyIDYuNTNhLjc1Ljc1IDAgMCAxIDAtMS4wNlpNNi43OCA2LjUzIDUuMzEgOGwxLjQ3IDEuNDdhLjc0OS43NDkgMCAwIDEtLjMyNiAxLjI3NS43NDkuNzQ5IDAgMCAxLS43MzQtLjIxNWwtMi0yYS43NS43NSAwIDAgMSAwLTEuMDZsMi0yYS43NTEuNzUxIDAgMCAxIDEuMDQyLjAxOC43NTEuNzUxIDAgMCAxIC4wMTggMS4wNDJaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-code-square .color-fg-muted}
[**main.tf**](#file-main-tf){.wb-break-all}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1hbGVydCI+CiAgICA8cGF0aCBkPSJNNi40NTcgMS4wNDdjLjY1OS0xLjIzNCAyLjQyNy0xLjIzNCAzLjA4NiAwbDYuMDgyIDExLjM3OEExLjc1IDEuNzUgMCAwIDEgMTQuMDgyIDE1SDEuOTE4YTEuNzUgMS43NSAwIDAgMS0xLjU0My0yLjU3NVptMS43NjMuNzA3YS4yNS4yNSAwIDAgMC0uNDQgMEwxLjY5OCAxMy4xMzJhLjI1LjI1IDAgMCAwIC4yMi4zNjhoMTIuMTY0YS4yNS4yNSAwIDAgMCAuMjItLjM2OFptLjUzIDMuOTk2djIuNWEuNzUuNzUgMCAwIDEtMS41IDB2LTIuNWEuNzUuNzUgMCAwIDEgMS41IDBaTTkgMTFhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-alert}
This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars){.Link--inTextBlock target="_blank"}

[Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D){.btn-sm .btn view-component="true"}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1hbGVydCI+CiAgICA8cGF0aCBkPSJNNi40NTcgMS4wNDdjLjY1OS0xLjIzNCAyLjQyNy0xLjIzNCAzLjA4NiAwbDYuMDgyIDExLjM3OEExLjc1IDEuNzUgMCAwIDEgMTQuMDgyIDE1SDEuOTE4YTEuNzUgMS43NSAwIDAgMS0xLjU0My0yLjU3NVptMS43NjMuNzA3YS4yNS4yNSAwIDAgMC0uNDQgMEwxLjY5OCAxMy4xMzJhLjI1LjI1IDAgMCAwIC4yMi4zNjhoMTIuMTY0YS4yNS4yNSAwIDAgMCAuMjItLjM2OFptLjUzIDMuOTk2djIuNWEuNzUuNzUgMCAwIDEtMS41IDB2LTIuNWEuNzUuNzUgMCAwIDEgMS41IDBaTTkgMTFhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-alert}

  -- ----------------------------------------------------------------------------------------------------
     /\*
     Usage:
     \$ tfenv install 0.12.19
     \$ tfenv use 0.12.19
     \$ terraform init
     \$ terraform plan
     \$ terraform apply -auto-approve
     \$ terraform destroy
     
     Reference: https://github.com/hashicorp/terraform/issues/22516
     \*/
     
     locals {
     dynamic_self_sg = \[
     {
     type = \"ingress\"
     from_port = 22
     to_port = 22
     protocol = \"tcp\"
     },
     {
     type = \"ingress\"
     from_port = 80
     to_port = 80
     protocol = \"tcp\"
     },
     \]
     groups_map = \[
     {
     name = \"groupe1@renault.com\"
     role = \"roles/editor\"
     },
     {
     name = \"groupe2@renault.com\"
     role = \"roles/viewer\"
     },
     {
     name = \"groupe2@renault.com\"
     role = \"project/myCustomRole\"
     },
     {
     name = \"groupe1@renault.com\"
     role = \"roles/bigquery.admin\"
     },
     \]
     }
     
     resource \"null_resource\" \"dynamic_self\" {
     /\*
     The following use of for_each fails with:
     Error: Invalid for_each argument
     The given \"for_each\" argument value is unsuitable: the \"for_each\" argument
     must be a map, or set of strings, and you have provided a value of type tuple.
     
     for_each = \[
     for s in local.dynamic_self_sg : {
     type = s.type
     from_port = s.from_port
     to_port = s.to_port
     protocol = s.protocol
     }
     if length(local.dynamic_self_sg) != 0
     \]
     \*/
     for_each = {
     for s in local.dynamic_self_sg : \"\${s.type} \${s.protocol}:\${s.from_port}-\${s.to_port}\" =\> s
     }
     
     provisioner \"local-exec\" {
     command = \"echo \${each.key}\"
     }
     }
     
     resource \"null_resource\" \"standard_roles\" {
     \# Extract mappings between groups and standard roles
     for_each = {
     for mapping in local.groups_map :
     \"\${mapping.name}:\${mapping.role}\" =\> mapping
     if substr(trimspace(mapping.role), 0, 6) == \"roles/\"
     }
     
     provisioner \"local-exec\" {
     command = \"echo Assign standard role \${each.value.role} to \${each.value.name}\"
     }
     }
     
     resource \"null_resource\" \"custom_roles\" {
     \# Extract mappings between groups and project-level custom roles
     for_each = {
     for mapping in local.groups_map :
     \"\${mapping.name}:\${mapping.role}\" =\> mapping
     if substr(trimspace(mapping.role), 0, 8) == \"project/\"
     }
     
     provisioner \"local-exec\" {
     command = \"echo Assign custom role \${each.value.role} to \${each.value.name}\"
     }
     }
  -- ----------------------------------------------------------------------------------------------------

[]{#comments}

[Sign up for free](/join?source=comment-gist){.btn .btn-primary rel="nofollow" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"signed out comment\",\"repository_id\":null,\"auth_type\":\"SIGN_UP\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="d8e24ddcd8d5d952178c7c03da951eb321db787383de548151372b0714dc264a"}
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgist.github.com%2Flvaylet%2F90a7a9c56ee9f5fcfc78efec9b713b22){.Link--inTextBlock rel="nofollow" hydro-click="{\"event_type\":\"authentication.click\",\"payload\":{\"location_in_page\":\"signed out comment\",\"repository_id\":null,\"auth_type\":\"LOG_IN\",\"originating_url\":\"https://gist.github.com/lvaylet/90a7a9c56ee9f5fcfc78efec9b713b22\",\"user_id\":null}}" hydro-click-hmac="412376d0cd14a4ca4c0a7bcd5b03d848f71cbe4a8a4a8188feb074baae7377c6" test-selector="comments-sign-in-link"}

## Footer {#footer .sr-only}

[![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIyNCIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIyNCIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1tYXJrLWdpdGh1YiI+CiAgICA8cGF0aCBkPSJNOCAwYzQuNDIgMCA4IDMuNTggOCA4YTguMDEzIDguMDEzIDAgMCAxLTUuNDUgNy41OWMtLjQuMDgtLjU1LS4xNy0uNTUtLjM4IDAtLjI3LjAxLTEuMTMuMDEtMi4yIDAtLjc1LS4yNS0xLjIzLS41NC0xLjQ4IDEuNzgtLjIgMy42NS0uODggMy42NS0zLjk1IDAtLjg4LS4zMS0xLjU5LS44Mi0yLjE1LjA4LS4yLjM2LTEuMDItLjA4LTIuMTIgMCAwLS42Ny0uMjItMi4yLjgyLS42NC0uMTgtMS4zMi0uMjctMi0uMjctLjY4IDAtMS4zNi4wOS0yIC4yNy0xLjUzLTEuMDMtMi4yLS44Mi0yLjItLjgyLS40NCAxLjEtLjE2IDEuOTItLjA4IDIuMTItLjUxLjU2LS44MiAxLjI4LS44MiAyLjE1IDAgMy4wNiAxLjg2IDMuNzUgMy42NCAzLjk1LS4yMy4yLS40NC41NS0uNTEgMS4wNy0uNDYuMjEtMS42MS41NS0yLjMzLS42Ni0uMTUtLjI0LS42LS44My0xLjIzLS44Mi0uNjcuMDEtLjI3LjM4LjAxLjUzLjM0LjE5LjczLjkuODIgMS4xMy4xNi40NS42OCAxLjMxIDIuNjkuOTQgMCAuNjcuMDEgMS4zLjAxIDEuNDkgMCAuMjEtLjE1LjQ1LS41NS4zOEE3Ljk5NSA3Ljk5NSAwIDAgMSAwIDhjMC00LjQyIDMuNTgtOCA4LThaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-mark-github}](https://github.com "GitHub"){.footer-octicon .mr-2 aria-label="Homepage"}
© 2023 GitHub, Inc.

### Footer navigation {#sr-footer-heading .sr-only}

-   [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service){analytics-event="{\"category\":\"Footer\",\"action\":\"go to terms\",\"label\":\"text:terms\"}"}
-   [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement){analytics-event="{\"category\":\"Footer\",\"action\":\"go to privacy\",\"label\":\"text:privacy\"}"}
-   [Security](https://github.com/security){analytics-event="{\"category\":\"Footer\",\"action\":\"go to security\",\"label\":\"text:security\"}"}
-   [Status](https://www.githubstatus.com/){analytics-event="{\"category\":\"Footer\",\"action\":\"go to status\",\"label\":\"text:status\"}"}
-   [Docs](https://docs.github.com){ga-click="Footer, go to help, text:Docs"}
-   [Contact GitHub](https://support.github.com?tags=dotcom-footer){analytics-event="{\"category\":\"Footer\",\"action\":\"go to contact\",\"label\":\"text:contact\"}"}
-   [Pricing](https://github.com/pricing){analytics-event="{\"category\":\"Footer\",\"action\":\"go to Pricing\",\"label\":\"text:Pricing\"}"}
-   [API](https://docs.github.com){analytics-event="{\"category\":\"Footer\",\"action\":\"go to api\",\"label\":\"text:api\"}"}
-   [Training](https://services.github.com){analytics-event="{\"category\":\"Footer\",\"action\":\"go to training\",\"label\":\"text:training\"}"}
-   [Blog](https://github.blog){analytics-event="{\"category\":\"Footer\",\"action\":\"go to blog\",\"label\":\"text:blog\"}"}
-   [About](https://github.com/about){ga-click="Footer, go to about, text:about"}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1hbGVydCI+CiAgICA8cGF0aCBkPSJNNi40NTcgMS4wNDdjLjY1OS0xLjIzNCAyLjQyNy0xLjIzNCAzLjA4NiAwbDYuMDgyIDExLjM3OEExLjc1IDEuNzUgMCAwIDEgMTQuMDgyIDE1SDEuOTE4YTEuNzUgMS43NSAwIDAgMS0xLjU0My0yLjU3NVptMS43NjMuNzA3YS4yNS4yNSAwIDAgMC0uNDQgMEwxLjY5OCAxMy4xMzJhLjI1LjI1IDAgMCAwIC4yMi4zNjhoMTIuMTY0YS4yNS4yNSAwIDAgMCAuMjItLjM2OFptLjUzIDMuOTk2djIuNWEuNzUuNzUgMCAwIDEtMS41IDB2LTIuNWEuNzUuNzUgMCAwIDEgMS41IDBaTTkgMTFhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiI+PC9wYXRoPgo8L3N2Zz4=){.octicon .octicon-alert}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi14Ij4KICAgIDxwYXRoIGQ9Ik0zLjcyIDMuNzJhLjc1Ljc1IDAgMCAxIDEuMDYgMEw4IDYuOTRsMy4yMi0zLjIyYS43NDkuNzQ5IDAgMCAxIDEuMjc1LjMyNi43NDkuNzQ5IDAgMCAxLS4yMTUuNzM0TDkuMDYgOGwzLjIyIDMuMjJhLjc0OS43NDkgMCAwIDEtLjMyNiAxLjI3NS43NDkuNzQ5IDAgMCAxLS43MzQtLjIxNUw4IDkuMDZsLTMuMjIgMy4yMmEuNzUxLjc1MSAwIDAgMS0xLjA0Mi0uMDE4Ljc1MS43NTEgMCAwIDEtLjAxOC0xLjA0Mkw2Ljk0IDggMy43MiA0Ljc4YS43NS43NSAwIDAgMSAwLTEuMDZaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-x}

You can't perform that action at this time.

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi14Ij4KICAgIDxwYXRoIGQ9Ik0zLjcyIDMuNzJhLjc1Ljc1IDAgMCAxIDEuMDYgMEw4IDYuOTRsMy4yMi0zLjIyYS43NDkuNzQ5IDAgMCAxIDEuMjc1LjMyNi43NDkuNzQ5IDAgMCAxLS4yMTUuNzM0TDkuMDYgOGwzLjIyIDMuMjJhLjc0OS43NDkgMCAwIDEtLjMyNiAxLjI3NS43NDkuNzQ5IDAgMCAxLS43MzQtLjIxNUw4IDkuMDZsLTMuMjIgMy4yMmEuNzUxLjc1MSAwIDAgMS0xLjA0Mi0uMDE4Ljc1MS43NTEgMCAwIDEtLjAxOC0xLjA0Mkw2Ljk0IDggMy43MiA0Ljc4YS43NS43NSAwIDAgMSAwLTEuMDZaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-x}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jb3B5IGpzLWNsaXBib2FyZC1jb3B5LWljb24gbS0yIj4KICAgIDxwYXRoIGQ9Ik0wIDYuNzVDMCA1Ljc4NC43ODQgNSAxLjc1IDVoMS41YS43NS43NSAwIDAgMSAwIDEuNWgtMS41YS4yNS4yNSAwIDAgMC0uMjUuMjV2Ny41YzAgLjEzOC4xMTIuMjUuMjUuMjVoNy41YS4yNS4yNSAwIDAgMCAuMjUtLjI1di0xLjVhLjc1Ljc1IDAgMCAxIDEuNSAwdjEuNUExLjc1IDEuNzUgMCAwIDEgOS4yNSAxNmgtNy41QTEuNzUgMS43NSAwIDAgMSAwIDE0LjI1WiI+PC9wYXRoPjxwYXRoIGQ9Ik01IDEuNzVDNSAuNzg0IDUuNzg0IDAgNi43NSAwaDcuNUMxNS4yMTYgMCAxNiAuNzg0IDE2IDEuNzV2Ny41QTEuNzUgMS43NSAwIDAgMSAxNC4yNSAxMWgtNy41QTEuNzUgMS43NSAwIDAgMSA1IDkuMjVabTEuNzUtLjI1YS4yNS4yNSAwIDAgMC0uMjUuMjV2Ny41YzAgLjEzOC4xMTIuMjUuMjUuMjVoNy41YS4yNS4yNSAwIDAgMCAuMjUtLjI1di03LjVhLjI1LjI1IDAgMCAwLS4yNS0uMjVaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-copy .js-clipboard-copy-icon .m-2}
![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jaGVjayBqcy1jbGlwYm9hcmQtY2hlY2staWNvbiBjb2xvci1mZy1zdWNjZXNzIGQtbm9uZSBtLTIiPgogICAgPHBhdGggZD0iTTEzLjc4IDQuMjJhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNy4yNSA3LjI1YS43NS43NSAwIDAgMS0xLjA2IDBMMi4yMiA5LjI4YS43NTEuNzUxIDAgMCAxIC4wMTgtMS4wNDIuNzUxLjc1MSAwIDAgMSAxLjA0Mi0uMDE4TDYgMTAuOTRsNi43Mi02LjcyYS43NS43NSAwIDAgMSAxLjA2IDBaIj48L3BhdGg+Cjwvc3ZnPg==){.octicon .octicon-check .js-clipboard-check-icon .color-fg-success .d-none .m-2}

![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jb3B5IGpzLWNsaXBib2FyZC1jb3B5LWljb24iPgogICAgPHBhdGggZD0iTTAgNi43NUMwIDUuNzg0Ljc4NCA1IDEuNzUgNWgxLjVhLjc1Ljc1IDAgMCAxIDAgMS41aC0xLjVhLjI1LjI1IDAgMCAwLS4yNS4yNXY3LjVjMCAuMTM4LjExMi4yNS4yNS4yNWg3LjVhLjI1LjI1IDAgMCAwIC4yNS0uMjV2LTEuNWEuNzUuNzUgMCAwIDEgMS41IDB2MS41QTEuNzUgMS43NSAwIDAgMSA5LjI1IDE2aC03LjVBMS43NSAxLjc1IDAgMCAxIDAgMTQuMjVaIj48L3BhdGg+PHBhdGggZD0iTTUgMS43NUM1IC43ODQgNS43ODQgMCA2Ljc1IDBoNy41QzE1LjIxNiAwIDE2IC43ODQgMTYgMS43NXY3LjVBMS43NSAxLjc1IDAgMCAxIDE0LjI1IDExaC03LjVBMS43NSAxLjc1IDAgMCAxIDUgOS4yNVptMS43NS0uMjVhLjI1LjI1IDAgMCAwLS4yNS4yNXY3LjVjMCAuMTM4LjExMi4yNS4yNS4yNWg3LjVhLjI1LjI1IDAgMCAwIC4yNS0uMjV2LTcuNWEuMjUuMjUgMCAwIDAtLjI1LS4yNVoiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-copy .js-clipboard-copy-icon}
![](data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgaGVpZ2h0PSIxNiIgdmlld2JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNiIgZGF0YS12aWV3LWNvbXBvbmVudD0idHJ1ZSIgY2xhc3M9Im9jdGljb24gb2N0aWNvbi1jaGVjayBqcy1jbGlwYm9hcmQtY2hlY2staWNvbiBjb2xvci1mZy1zdWNjZXNzIGQtbm9uZSI+CiAgICA8cGF0aCBkPSJNMTMuNzggNC4yMmEuNzUuNzUgMCAwIDEgMCAxLjA2bC03LjI1IDcuMjVhLjc1Ljc1IDAgMCAxLTEuMDYgMEwyLjIyIDkuMjhhLjc1MS43NTEgMCAwIDEgLjAxOC0xLjA0Mi43NTEuNzUxIDAgMCAxIDEuMDQyLS4wMThMNiAxMC45NGw2LjcyLTYuNzJhLjc1Ljc1IDAgMCAxIDEuMDYgMFoiPjwvcGF0aD4KPC9zdmc+){.octicon .octicon-check .js-clipboard-check-icon .color-fg-success .d-none}
