# Stateful Workloads with Container Storage Interface | Nomad | HashiCorp Developer (developer.hashicorp.com)

<https://developer.hashicorp.com/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes>

## Content

[HCP Vault Secrets Centralized secrets lifecycle management for developers. Learn More](/hcp/docs/vault-secrets){.style_linkElem__N77Wq}

![](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdib3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTUgNUw1IDE1TTUgNWwxMCAxMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48L3BhdGg+PC9zdmc+)

Dismiss alert

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDI0IDI0IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InByb2R1Y3QtcGFnZS1jb250ZW50X3Byb2R1Y3RzRHJvcGRvd25JY29uX193QnEzaSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTAuMzM2IDEuNUwyIDYuMjY4djExLjQ1NmwzLjEzMSAxLjc5M1Y4LjA2MWw1LjIwNS0yLjk3OVYxLjV6Ij48L3BhdGg+PHBhdGggZD0iTTEzLjY2NCAxLjV2OS4xMjNoLTMuMzI4VjcuMjE5TDcuMjAzIDkuMDEyVjIwLjdsMy4xMzMgMS43OTZWMTMuNGgzLjMyOHYzLjM4MWwzLjEzMS0xLjc5M1YzLjI5M0wxMy42NjQgMS41eiI+PC9wYXRoPjxwYXRoIGQ9Ik0yMiAxNy43MzJMMTMuNjY0IDIyLjV2LTMuNTgybDUuMjAzLTIuOThWNC40ODRMMjIgNi4yNzZ2MTEuNDU2eiI+PC9wYXRoPjwvZz48L3N2Zz4=){.product-page-content_productsDropdownIcon__wBq3i}![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImRyb3Bkb3duLW1lbnVfYWN0aXZhdG9yVHJhaWxpbmdJY29uX185SjZkTCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zLjIzNSA1LjIwNWEuNzUuNzUgMCAwMTEuMDYuMDNMOCA5LjE1OGwzLjcwNS0zLjkyM2EuNzUuNzUgMCAwMTEuMDkgMS4wM2wtNC4yNSA0LjVhLjc1Ljc1IDAgMDEtMS4wOSAwbC00LjI1LTQuNWEuNzUuNzUgMCAwMS4wMy0xLjA2eiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PC9zdmc+){.dropdown-menu_activatorTrailingIcon__9J6dL}

-   [](/){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNNy44NDYgMi41NzRhLjI1LjI1IDAgMDEuMzA4IDBsNS4yNSA0LjEyYS4yNS4yNSAwIDAxLjA5Ni4xOTZ2Ny4zNmEuNzUuNzUgMCAwMDEuNSAwVjYuODlhMS43NSAxLjc1IDAgMDAtLjY3LTEuMzc3TDkuMDggMS4zOTRhMS43NSAxLjc1IDAgMDAtMi4xNiAwbC01LjI1IDQuMTJBMS43NSAxLjc1IDAgMDAxIDYuODl2Ny4zNmEuNzUuNzUgMCAwMDEuNSAwVjYuODlhLjI1LjI1IDAgMDEuMDk2LS4xOTZsNS4yNS00LjEyeiI+PC9wYXRoPjxwYXRoIGQ9Ik02LjUgMTQuMjVWMTAuNWgzdjMuNzVhLjc1Ljc1IDAgMDAxLjUgMHYtNEMxMSA5LjU2IDEwLjQ0IDkgOS43NSA5aC0zLjVDNS41NiA5IDUgOS41NiA1IDEwLjI1djRhLjc1Ljc1IDAgMDAxLjUgMHoiPjwvcGF0aD48L2c+PC9zdmc+)HashiCorp Developer

------------------------------------------------------------------------

-   [](/hcp){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNNi44MzUuNkwxIDMuOTZ2OC4wNzRsMi4xOTIgMS4yNjRWNS4yMjRsMy42NDMtMi4xVi42eiI+PC9wYXRoPjxwYXRoIGQ9Ik05LjE2NS42djYuNDNoLTIuMzN2LTIuNEw0LjY0MiA1Ljg5NHY4LjIzN2wyLjE5MyAxLjI2NnYtNi40MWgyLjMzdjIuMzgzbDIuMTkyLTEuMjY0VjEuODY0TDkuMTY1LjZ6Ij48L3BhdGg+PHBhdGggZD0iTTE1IDEyLjA0TDkuMTY1IDE1LjR2LTIuNTI1bDMuNjQyLTIuMVYyLjcwM0wxNSAzLjk2NnY4LjA3M3oiPjwvcGF0aD48L2c+PC9zdmc+)HashiCorp Cloud Platform
-   [](/terraform){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0idmFyKC0tdG9rZW4tY29sb3ItdGVycmFmb3JtLWJyYW5kKSI+PHBhdGggZD0iTTEgMHY1LjA1bDQuMzQ5IDIuNTI3VjIuNTI2TDEgMHpNMTAuMTc1IDUuMzQ0bC00LjM1LTIuNTI1djUuMDVsNC4zNSAyLjUyN1Y1LjM0NHpNMTAuNjUxIDEwLjM5NlY1LjM0NEwxNSAyLjgxOXY1LjA1bC00LjM0OSAyLjUyN3pNMTAuMTc0IDE2bC00LjM0OS0yLjUyNnYtNS4wNWw0LjM0OSAyLjUyNVYxNnoiPjwvcGF0aD48L2c+PC9zdmc+)Terraform
-   [](/packer){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0idmFyKC0tdG9rZW4tY29sb3ItcGFja2VyLWJyYW5kKSI+PHBhdGggZD0iTTUuMTYzIDBsNS43NjIgMy4yNDdjMS4xMzguNjQ2IDIuMDc0IDIuMDg1IDIuMDc1IDMuMnY0Ljk2M2MwIDEuMTIzLS45MzMgMS41MDItMi4wNzQuODU4TDkuMDgzIDExLjIzVjQuNDY5bC0zLjkyLTIuMjE2VjB6Ij48L3BhdGg+PHBhdGggZD0iTTguMyA0Ljk1M0wzIDEuOTU2djExLjA0N0w4LjMgMTZWNC45NTN6Ij48L3BhdGg+PC9nPjwvc3ZnPg==)Packer
-   [](/consul){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0idmFyKC0tdG9rZW4tY29sb3ItY29uc3VsLWJyYW5kKSI+PHBhdGggZD0iTTQuNzM3IDE0LjE5M0E3IDcgMCAwMDguMDA2IDE1YTYuOTggNi45OCAwIDAwNC43MzUtMS44NDdsLTEuNjYtMS43MzdhNC42IDQuNiAwIDExMC02LjgyOGwxLjY2LTEuNzM4YTcgNyAwIDEwLTguMDA0IDExLjM0M3pNMTMuMzIgMTEuNDAyYS41NzMuNTczIDAgMTAuNjM3LS45NTMuNTczLjU3MyAwIDAwLS42MzcuOTUzeiI+PC9wYXRoPjxwYXRoIGQ9Ik03Ljk2IDkuNTE3YTEuNTE3IDEuNTE3IDAgMTEtLjAxMi0zLjAzNCAxLjUxNyAxLjUxNyAwIDAxLjAxMyAzLjAzNHpNMTMuOTc4IDkuNDQ3YS41NzQuNTc0IDAgMTAuNjM3LS45NTQuNTc0LjU3NCAwIDAwLS42MzcuOTU0ek0xMi41OSA5LjQ3MmEuNTc0LjU3NCAwIDExMC0xLjE0OC41NzQuNTc0IDAgMDEwIDEuMTQ4ek0xMy45NzggNy41MTRhLjU3NC41NzQgMCAxMC42MzctLjk1NC41NzQuNTc0IDAgMDAtLjYzNy45NTR6TTEyLjU5IDcuNjc1YS41NzQuNTc0IDAgMTEwLTEuMTQ4LjU3NC41NzQgMCAwMTAgMS4xNDh6TTEzLjM1MyA1LjU4NWEuNTc0LjU3NCAwIDEwLjYzNS0uOTU2LjU3NC41NzQgMCAwMC0uNjM1Ljk1NnoiPjwvcGF0aD48L2c+PC9zdmc+)Consul
-   [](/vault){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0idmFyKC0tdG9rZW4tY29sb3ItdmF1bHQtYnJhbmQpIiBkPSJNMCAwbDcuOTcxIDE1LjUxNkwxNiAwSDB6bTYuNzMyIDYuMTZoLTEuMjdWNC44OWgxLjI3djEuMjd6bTAtMS45MDZoLTEuMjdWMi45ODVoMS4yN3YxLjI2OXptMS45MDQgMy44MWgtMS4yN3YtMS4yN2gxLjI3djEuMjd6bTAtMS45MDVoLTEuMjdWNC44OWgxLjI3djEuMjd6bTAtMS45MDVoLTEuMjdWMi45ODVoMS4yN3YxLjI2OXptMS44OTQgMS45MDVIOS4yNlY0Ljg5aDEuMjd2MS4yN3pNOS4yNiA0LjI1NFYyLjk4NWgxLjI3djEuMjY5SDkuMjZ6Ij48L3BhdGg+PC9zdmc+)Vault
-   [](/boundary){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0idmFyKC0tdG9rZW4tY29sb3ItYm91bmRhcnktYnJhbmQpIj48cGF0aCBkPSJNNC44MSAxNXYtMS4wODVoMi4yNXYtLjY3SDUuOTY4di0xLjA5M2g1LjE0OUw4LjcyNiA4bDIuMzkyLTQuMTU0SDUuODR2NS43NkgzVjFoOS43NzVsMS42MzEgMi44MzJMMTIuMDA2IDhsMi40NDggNC4yNTJMMTIuODcyIDE1SDQuODF6Ij48L3BhdGg+PHBhdGggZD0iTTUuMjQ4IDEyLjE1MmgtMS4wOXYxLjA5MmgxLjA5di0xLjA5MnpNMyAxMy45MDdoMS4wOXYxLjA5Mkgzdi0xLjA5MnoiPjwvcGF0aD48L2c+PC9zdmc+)Boundary
-   [](/nomad){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0idmFyKC0tdG9rZW4tY29sb3Itbm9tYWQtYnJhbmQpIiBkPSJNOCAwTDEgNHY4bDcgNCA3LTRWNEw4IDB6bTMuMTE5IDguNzk3TDkuMjU0IDkuODYzIDcuMDAxIDguNjV2Mi41NDlsLTIuMTE4IDEuMzN2LTUuMzNsMS42OC0xLjAxOCAyLjMzMiAxLjIxNlY0Ljc5NGwyLjIzLTEuMzIyLS4wMDYgNS4zMjV6Ij48L3BhdGg+PC9zdmc+)Nomad
-   [](/waypoint){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0idmFyKC0tdG9rZW4tY29sb3Itd2F5cG9pbnQtYnJhbmQpIj48cGF0aCBkPSJNNCA1LjMxMmgxLjMzNEwxMCAxMy40bDMuMzM0LTUuNzc3TDEwLjY2NiAzSDhsMi42NjYgNC42MjNMMTAgOC43NzggNi42NjcgM0gwbDYgMTAuNCAxLjMzMy0yLjMxTDQgNS4zMTF6TTE0LjAwMiA2LjQ2M0wxNiAzaC0zLjk5NmwxLjk5OCAzLjQ2M3oiPjwvcGF0aD48L2c+PC9zdmc+)Waypoint
-   [](/vagrant){.dropdown-menu_itemLink__VpbEz .g-focus-ring-from-box-shadow heap-track="navigation-header-dropdown-menu-link"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0iIzE4NjhGMiIgZD0iTTEzLjA4Ljc1TDkuOTI0IDIuNTh2MS4xMjNMOCA4LjI0NSA2LjA3NiAzLjcwM1YyLjU4TDIuOTIuNzUgMSAxLjg2NHYxLjI5M2w0LjI3NiAxMC41MTRMOCAxNS4yNWwyLjcyNC0xLjU3OUwxNSAzLjE1N1YxLjg2NEwxMy4wOC43NXoiPjwvcGF0aD48cGF0aCBmaWxsPSIjMDg1MEM1IiBkPSJNMTUgMS44NjVsLTMuMTU3IDEuODI5djEuMTI0TDkuMjggMTAuNTcgOCAxMS4zMTJ2My45MzlsMi43MjQtMS41NzlMMTUgMy4xNThWMS44NjV6TTYuMDc2IDMuNzAzVjIuNThsLTEuOTIgMS4xMTN2MS4xMjVsMi41NjQgNS43NTFMOCA5LjgyN1Y4LjI0NUw2LjA3NiAzLjcwM3oiPjwvcGF0aD48L3N2Zz4=)Vagrant

[](/nomad){.product-icon-text-link_root__8kSDs .g-focus-ring-from-box-shadow-dark aria-label="Nomad home" heap-track="navigation-header-product-logo-link"}

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InByb2R1Y3QtaWNvbi10ZXh0LWxvY2t1cF9pY29uX19pX0VCNCI+PHBhdGggZmlsbD0idmFyKC0tdG9rZW4tY29sb3Itbm9tYWQtYnJhbmQpIiBkPSJNOCAwTDEgNHY4bDcgNCA3LTRWNEw4IDB6bTMuMTE5IDguNzk3TDkuMjU0IDkuODYzIDcuMDAxIDguNjV2Mi41NDlsLTIuMTE4IDEuMzN2LTUuMzNsMS42OC0xLjAxOCAyLjMzMiAxLjIxNlY0Ljc5NGwyLjIzLTEuMzIyLS4wMDYgNS4zMjV6Ij48L3BhdGg+PC9zdmc+){.product-icon-text-lockup_icon__i_EB4}Nomad

-   [Install](/nomad/downloads){.primary-nav-link_root__5e0jF .g-focus-ring-from-box-shadow-dark aria-label="Nomad Install" heap-track="navigation-header-primary-nav-link"}
-   [Intro](/nomad/intro){.primary-nav-link_root__5e0jF .g-focus-ring-from-box-shadow-dark aria-label="Nomad Intro" heap-track="navigation-header-primary-nav-link"}
-   [Tutorials](/nomad/tutorials){.primary-nav-link_root__5e0jF .g-focus-ring-from-box-shadow-dark aria-label="Nomad Tutorials" heap-track="navigation-header-primary-nav-link"}
-   [Documentation](/nomad/docs){.primary-nav-link_root__5e0jF .g-focus-ring-from-box-shadow-dark aria-label="Nomad Documentation" heap-track="navigation-header-primary-nav-link"}
-   [API](/nomad/api-docs){.primary-nav-link_root__5e0jF .g-focus-ring-from-box-shadow-dark aria-label="Nomad API" heap-track="navigation-header-primary-nav-link"}
-   [Tools](/nomad/tools){.primary-nav-link_root__5e0jF .g-focus-ring-from-box-shadow-dark aria-label="Nomad Tools" heap-track="navigation-header-primary-nav-link"}
-   [Plugins](/nomad/plugins){.primary-nav-link_root__5e0jF .g-focus-ring-from-box-shadow-dark aria-label="Nomad Plugins" heap-track="navigation-header-primary-nav-link"}
-   [Integrations](/nomad/integrations){.primary-nav-link_root__5e0jF .g-focus-ring-from-box-shadow-dark aria-label="Nomad Integrations" heap-track="navigation-header-primary-nav-link"}

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjI1IDJhNS4yNSA1LjI1IDAgMTAzLjE0NCA5LjQ1NWwyLjMyNiAyLjMyNWEuNzUuNzUgMCAxMDEuMDYtMS4wNmwtMi4zMjUtMi4zMjZBNS4yNSA1LjI1IDAgMDA3LjI1IDJ6TTMuNSA3LjI1YTMuNzUgMy43NSAwIDExNy41IDAgMy43NSAzLjc1IDAgMDEtNy41IDB6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiPjwvcGF0aD48L3N2Zz4=)SearchCommand or control key

![](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDEiIGhlaWdodD0iMTEiIHZpZXdib3g9IjAgMCA0MSAxMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMTI1IDIuMDYzVjNoMi4yNXYtLjkzOGEyLjA2MiAyLjA2MiAwIDExMi4wNjMgMi4wNjNINy41djIuMjVoLjkzOGEyLjA2MiAyLjA2MiAwIDExLTIuMDYzIDIuMDYzVjcuNWgtMi4yNXYuOTM4YTIuMDYyIDIuMDYyIDAgMTEtMi4wNjMtMi4wNjNIM3YtMi4yNWgtLjkzOGEyLjA2MiAyLjA2MiAwIDExMi4wNjMtMi4wNjN6bS0yLjA2My0uOTM4YS45MzcuOTM3IDAgMTAwIDEuODc1SDN2LS45MzhhLjkzNy45MzcgMCAwMC0uOTM4LS45Mzd6TTcuNSA3LjV2LjkzOGEuOTM3LjkzNyAwIDEwLjkzOC0uOTM4SDcuNXpNNi4zNzUgNi4zNzV2LTIuMjVoLTIuMjV2Mi4yNWgyLjI1ek0yLjA2MiA3LjVIM3YuOTM4YS45MzcuOTM3IDAgMTEtLjkzOC0uOTM4ek03LjUgM2guOTM4YS45MzcuOTM3IDAgMTAtLjkzOC0uOTM4VjN6IiBmaWxsPSIjZmZmIj48L3BhdGg+PHBhdGggZD0iTTE1LjA5IDEwLjVMMTguMDg1IDBoLTEuMDk3TDE0IDEwLjVoMS4wOXptMTEuMjk3LTUuMTkyYy0uMTgzLTEuNDQ1LTEuMjYzLTIuNTM0LTMuMDUtMi41MzRDMjEuMjY0IDIuNzc0IDIwIDQuMjQ3IDIwIDYuNjFjMCAyLjQxIDEuMjcgMy44OSAzLjM0NCAzLjg5IDEuNzYgMCAyLjg2LTEuMDM0IDMuMDQzLTIuNUgyNS4wMmMtLjE4NC44MDgtLjc5MiAxLjI0Ny0xLjY4MiAxLjI0Ny0xLjE3MiAwLTEuODk4LS45OTQtMS44OTgtMi42MzcgMC0xLjYxLjcyLTIuNTgzIDEuODk4LTIuNTgzLjk0MiAwIDEuNTE4LjU1NSAxLjY4MSAxLjI4MWgxLjM2OHpNMjguNiAxLjA0MXYxLjg5N2gtMS4xMzN2MS4xNzhIMjguNnY0LjI4MWMwIDEuNDMyLjYyMiAyLjAwNyAyLjE4NiAyLjAwNy4yNzUgMCAuNTM3LS4wMzQuNzY2LS4wNzVWOS4xNThjLS4xOTYuMDItLjMyLjAzNC0uNTM3LjAzNC0uNyAwLTEuMDA4LS4zNS0xLjAwOC0xLjE1VjQuMTE1aDEuNTQ1VjIuOTM4aC0xLjU0NVYxLjA0MUgyOC42em00LjYwNyA5LjMxNWgxLjQwN1Y1LjkxMWMwLTEuMDQ4Ljc1Mi0xLjc2NyAxLjgxOS0xLjc2Ny4yNDkgMCAuNjY3LjA0OC43ODUuMDgyVjIuODQyYTMuMzcyIDMuMzcyIDAgMDAtLjYyOC0uMDU0Yy0uOTMgMC0xLjcyMS41MjctMS45MjQgMS4yNmgtLjEwNXYtMS4xM2gtMS4zNTR2Ny40Mzh6bTUuNDMxIDBoMS40MDdWMGgtMS40MDd2MTAuMzU2eiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvc3ZnPg==)

K key

![](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSIxMCIgdmlld2JveD0iMCAwIDggMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNTEyIDkuODR2LTNsLjk4Ni0xLjE0N0w1LjQ0NSA5Ljg0aDEuNzA0TDMuNDYgNC43NDUgNi44NTcuODRINS4yNDRMMS42MSA1LjA5NGgtLjA5OFYuODRILjE1djloMS4zNjN6IiBmaWxsPSIjZmZmIj48L3BhdGg+PC9zdmc+)

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDI0IDI0IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMiAzYTUgNSAwIDEwMCAxMCA1IDUgMCAwMDAtMTB6TTguNSA4YTMuNSAzLjUgMCAxMTcgMCAzLjUgMy41IDAgMDEtNyAweiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PHBhdGggZD0iTTcuNzUgMTQuNUE0Ljc1IDQuNzUgMCAwMDMgMTkuMjV2MWEuNzUuNzUgMCAwMDEuNSAwdi0xQTMuMjUgMy4yNSAwIDAxNy43NSAxNmg4LjVhMy4yNSAzLjI1IDAgMDEzLjI1IDMuMjV2MWEuNzUuNzUgMCAwMDEuNSAwdi0xYTQuNzUgNC43NSAwIDAwLTQuNzUtNC43NWgtOC41eiI+PC9wYXRoPjwvZz48L3N2Zz4=)![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zLjIzNSA1LjIwNWEuNzUuNzUgMCAwMTEuMDYuMDNMOCA5LjE1OGwzLjcwNS0zLjkyM2EuNzUuNzUgMCAwMTEuMDkgMS4wM2wtNC4yNSA0LjVhLjc1Ljc1IDAgMDEtMS4wOSAwbC00LjI1LTQuNWEuNzUuNzUgMCAwMS4wMy0xLjA2eiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PC9zdmc+)

-   Sign in

-   [Sign up](/sign-up){.list-item_link__HfxcT .g-focus-ring-from-box-shadow}



    ------------------------------------------------------------------------

-   Theme

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDI0IDI0IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMiA1Ljc1QS43NS43NSAwIDAxMi43NSA1aDE4LjVhLjc1Ljc1IDAgMDEwIDEuNUgyLjc1QS43NS43NSAwIDAxMiA1Ljc1ek0yIDExLjc1YS43NS43NSAwIDAxLjc1LS43NWgxOC41YS43NS43NSAwIDAxMCAxLjVIMi43NWEuNzUuNzUgMCAwMS0uNzUtLjc1ek0yLjc1IDE3YS43NS43NSAwIDAwMCAxLjVoMTguNWEuNzUuNzUgMCAwMDAtMS41SDIuNzV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==)

[](/nomad/tutorials/stateful-workloads){.standalone-link_standaloneLink__BqSgp .g-focus-ring-from-box-shadow .standalone-link_primary__dy62o heap-track="standalone-link sidebar-back-to-link"}

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC43OTUgMy4yMzVhLjc1Ljc1IDAgMDEtLjAzIDEuMDZMNi44NDIgOGwzLjkyMyAzLjcwNWEuNzUuNzUgMCAwMS0xLjAzIDEuMDlsLTQuNS00LjI1YS43NS43NSAwIDAxMC0xLjA5bDQuNS00LjI1YS43NS43NSAwIDAxMS4wNi4wM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvc3ZnPg==)Stateful Workloads

##  {#sidebar-label .sidebar-headings_root__7EIuF}

[Skip to main content](#main){.skip-to-main-content_root__KEA0_ .g-focus-border-and-box-shadow-light}

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImNvbGxlY3Rpb24tcHJvZ3Jlc3Mtc3RhdHVzLXNlY3Rpb25fY291bnRJY29uX193NkdjWSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMy4wNSA0Ljc1YS43LjcgMCAwMS43LS43aDMuNWEuNy43IDAgMTEwIDEuNGgtMy41YS43LjcgMCAwMS0uNy0uN3pNMy43NSA3LjA1YS43LjcgMCAxMDAgMS40aDIuNWEuNy43IDAgMTAwLTEuNGgtMi41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTAgMy4yNUEyLjI1IDIuMjUgMCAwMTIuMjUgMWg2LjVjLjg4MyAwIDEuNjQ4LjUxIDIuMDE2IDEuMjVoLjk4NGMuNjk4IDAgMS4zLjQwOSAxLjU4MiAxaC45MThjLjk2NiAwIDEuNzUuNzg0IDEuNzUgMS43NXY2YTEuNzUgMS43NSAwIDAxLTEuNzUgMS43NWgtLjkxOGMtLjI4MS41OTEtLjg4NCAxLTEuNTgyIDFoLS45ODRBMi4yNSAyLjI1IDAgMDE4Ljc1IDE1aC02LjVBMi4yNSAyLjI1IDAgMDEwIDEyLjc1di05LjV6bTEzLjUgOGguNzVhLjI1LjI1IDAgMDAuMjUtLjI1VjVhLjI1LjI1IDAgMDAtLjI1LS4yNWgtLjc1djYuNXptLTIuNSAxdi04LjVoLjc1QS4yNS4yNSAwIDAxMTIgNHY4YS4yNS4yNSAwIDAxLS4yNS4yNUgxMXpNMi4yNSAyLjVhLjc1Ljc1IDAgMDAtLjc1Ljc1djkuNWMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDYuNWEuNzUuNzUgMCAwMC43NS0uNzV2LTkuNWEuNzUuNzUgMCAwMC0uNzUtLjc1aC02LjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiPjwvcGF0aD48L2c+PC9zdmc+){.collection-progress-status-section_countIcon__w6GcY}5 tutorials

-   [Workloads with persistent data](/nomad/tutorials/stateful-workloads/stateful-workloads){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow heap-track="sidebar-nav-link-item"}
-   [Workloads with host volumes](/nomad/tutorials/stateful-workloads/stateful-workloads-host-volumes){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow heap-track="sidebar-nav-link-item"}
-   [Workloads with CSI](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow aria-current="page" heap-track="sidebar-nav-link-item"}
-   [Workloads with Portworx](/nomad/tutorials/stateful-workloads/stateful-workloads-portworx){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow heap-track="sidebar-nav-link-item"}
-   [Exec driver and host volumes](/nomad/tutorials/stateful-workloads/exec-users-host-volumes){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow heap-track="sidebar-nav-link-item"}

------------------------------------------------------------------------

-   ### Resources {#resources .sidebar-headings_root__7EIuF}

-   [Tutorial Library](/tutorials/library?product=nomad){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow heap-track="sidebar-nav-link-item"}

-   [Community Forum](https://discuss.hashicorp.com/c/nomad/28){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow aria-label="Community Forum. Opens in a new tab." heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="undefinedopens-in-new-tab-label-react-aria-31" target="_blank"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNOSAuNzVBLjc1Ljc1IDAgMDE5Ljc1IDBoNC41Yy4yMDYgMCAuMzkzLjA4My41MjkuMjE4bC4wMDEuMDAyLjAwMi4wMDFBLjc0OC43NDggMCAwMTE1IC43NXY0LjVhLjc1Ljc1IDAgMDEtMS41IDBWMi41Nkw3LjI4IDguNzhhLjc1Ljc1IDAgMDEtMS4wNi0xLjA2bDYuMjItNi4yMkg5Ljc1QS43NS43NSAwIDAxOSAuNzV6Ij48L3BhdGg+PHBhdGggZD0iTTMuMjUgMy41YS43NS43NSAwIDAwLS43NS43NXY3LjVjMCAuNDE0LjMzNi43NS43NS43NWg3LjVhLjc1Ljc1IDAgMDAuNzUtLjc1di00YS43NS43NSAwIDAxMS41IDB2NEEyLjI1IDIuMjUgMCAwMTEwLjc1IDE0aC03LjVBMi4yNSAyLjI1IDAgMDExIDExLjc1di03LjVBMi4yNSAyLjI1IDAgMDEzLjI1IDJoNGEuNzUuNzUgMCAwMTAgMS41aC00eiI+PC9wYXRoPjwvZz48L3N2Zz4=)
    (opens in new tab)

-   [Support](https://www.hashicorp.com/customer-success){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow aria-label="Support. Opens in a new tab." heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="undefinedopens-in-new-tab-label-react-aria-32" target="_blank"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNOSAuNzVBLjc1Ljc1IDAgMDE5Ljc1IDBoNC41Yy4yMDYgMCAuMzkzLjA4My41MjkuMjE4bC4wMDEuMDAyLjAwMi4wMDFBLjc0OC43NDggMCAwMTE1IC43NXY0LjVhLjc1Ljc1IDAgMDEtMS41IDBWMi41Nkw3LjI4IDguNzhhLjc1Ljc1IDAgMDEtMS4wNi0xLjA2bDYuMjItNi4yMkg5Ljc1QS43NS43NSAwIDAxOSAuNzV6Ij48L3BhdGg+PHBhdGggZD0iTTMuMjUgMy41YS43NS43NSAwIDAwLS43NS43NXY3LjVjMCAuNDE0LjMzNi43NS43NS43NWg3LjVhLjc1Ljc1IDAgMDAuNzUtLjc1di00YS43NS43NSAwIDAxMS41IDB2NEEyLjI1IDIuMjUgMCAwMTEwLjc1IDE0aC03LjVBMi4yNSAyLjI1IDAgMDExIDExLjc1di03LjVBMi4yNSAyLjI1IDAgMDEzLjI1IDJoNGEuNzUuNzUgMCAwMTAgMS41aC00eiI+PC9wYXRoPjwvZz48L3N2Zz4=)
    (opens in new tab)

-   [GitHub](https://github.com/hashicorp/nomad){.sidebar-nav-menu-item_sidebarNavMenuItem__i1Wj0 .g-focus-ring-from-box-shadow aria-label="GitHub. Opens in a new tab." heap-track="sidebar-nav-link-item" rel="noreferrer noopener" aria-describedby="undefinedopens-in-new-tab-label-react-aria-33" target="_blank"}
    ![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNOSAuNzVBLjc1Ljc1IDAgMDE5Ljc1IDBoNC41Yy4yMDYgMCAuMzkzLjA4My41MjkuMjE4bC4wMDEuMDAyLjAwMi4wMDFBLjc0OC43NDggMCAwMTE1IC43NXY0LjVhLjc1Ljc1IDAgMDEtMS41IDBWMi41Nkw3LjI4IDguNzhhLjc1Ljc1IDAgMDEtMS4wNi0xLjA2bDYuMjItNi4yMkg5Ljc1QS43NS43NSAwIDAxOSAuNzV6Ij48L3BhdGg+PHBhdGggZD0iTTMuMjUgMy41YS43NS43NSAwIDAwLS43NS43NXY3LjVjMCAuNDE0LjMzNi43NS43NS43NWg3LjVhLjc1Ljc1IDAgMDAuNzUtLjc1di00YS43NS43NSAwIDAxMS41IDB2NEEyLjI1IDIuMjUgMCAwMTEwLjc1IDE0aC03LjVBMi4yNSAyLjI1IDAgMDExIDExLjc1di03LjVBMi4yNSAyLjI1IDAgMDEzLjI1IDJoNGEuNzUuNzUgMCAwMTAgMS41aC00eiI+PC9wYXRoPjwvZz48L3N2Zz4=)
    (opens in new tab)

1.  [Developer](/){.breadcrumb-bar_breadcrumbText__ftu3n .g-focus-ring-from-box-shadow heap-track="breadcrumb-bar-item"}
2.  [Nomad](/nomad){.breadcrumb-bar_breadcrumbText__ftu3n .g-focus-ring-from-box-shadow heap-track="breadcrumb-bar-item"}
3.  [Tutorials](/nomad/tutorials){.breadcrumb-bar_breadcrumbText__ftu3n .g-focus-ring-from-box-shadow heap-track="breadcrumb-bar-item"}
4.  [Stateful Workloads](/nomad/tutorials/stateful-workloads){.breadcrumb-bar_breadcrumbText__ftu3n .g-focus-ring-from-box-shadow heap-track="breadcrumb-bar-item"}
5.  [Workloads with CSI](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes){.breadcrumb-bar_breadcrumbText__ftu3n .g-focus-ring-from-box-shadow aria-current="page" heap-track="breadcrumb-bar-item"}

# Stateful Workloads with Container Storage Interface {#stateful-workloads-csi-volumes .hds-typography-display-600 .hds-font-weight-bold .tutorial-meta_heading___aCZj .g-offset-scroll-margin-top}

-   13min
-   \|
-   Terraform![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0idmFyKC0tdG9rZW4tY29sb3ItdGVycmFmb3JtLWJyYW5kKSI+PHBhdGggZD0iTTEgMHY1LjA1bDQuMzQ5IDIuNTI3VjIuNTI2TDEgMHpNMTAuMTc1IDUuMzQ0bC00LjM1LTIuNTI1djUuMDVsNC4zNSAyLjUyN1Y1LjM0NHpNMTAuNjUxIDEwLjM5NlY1LjM0NEwxNSAyLjgxOXY1LjA1bC00LjM0OSAyLjUyN3pNMTAuMTc0IDE2bC00LjM0OS0yLjUyNnYtNS4wNWw0LjM0OSAyLjUyNVYxNnoiPjwvcGF0aD48L2c+PC9zdmc+)Terraform
-   Nomad![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0idmFyKC0tdG9rZW4tY29sb3Itbm9tYWQtYnJhbmQpIiBkPSJNOCAwTDEgNHY4bDcgNCA3LTRWNEw4IDB6bTMuMTE5IDguNzk3TDkuMjU0IDkuODYzIDcuMDAxIDguNjV2Mi41NDlsLTIuMTE4IDEuMzN2LTUuMzNsMS42OC0xLjAxOCAyLjMzMiAxLjIxNlY0Ljc5NGwyLjIzLTEuMzIyLS4wMDYgNS4zMjV6Ij48L3BhdGg+PC9zdmc+)Nomad

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNNy43NSA0YS43NS43NSAwIDAxLjc1Ljc1VjZoMS4yNWEuNzUuNzUgMCAwMTAgMS41SDguNXYxLjI1YS43NS43NSAwIDAxLTEuNSAwVjcuNUg1Ljc1YS43NS43NSAwIDAxMC0xLjVIN1Y0Ljc1QS43NS43NSAwIDAxNy43NSA0eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIgMy4yNUEyLjI1IDIuMjUgMCAwMTQuMjUgMWg3LjVBMi4yNSAyLjI1IDAgMDExNCAzLjI1djEwLjgzYTEgMSAwIDAxLTEuNDc4Ljg3OEw4LjEyIDEyLjU2NGEuMjUuMjUgMCAwMC0uMjM4IDBsLTQuNDAzIDIuMzk0QTEgMSAwIDAxMiAxNC4wOFYzLjI1em0yLjI1LS43NWEuNzUuNzUgMCAwMC0uNzUuNzV2OS45ODlsMy42NjQtMS45OTJhMS43NSAxLjc1IDAgMDExLjY3MiAwbDMuNjY0IDEuOTkyVjMuMjVhLjc1Ljc1IDAgMDAtLjc1LS43NWgtNy41eiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PC9nPjwvc3ZnPg==)

Nomad's [Container Storage Interface (CSI)](https://github.com/container-storage-interface/spec){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI} integration can manage
external storage volumes for stateful workloads running inside your
cluster. CSI providers are third-party plugins that run as Nomad jobs
and can mount volumes created by your cloud provider. Nomad is aware
of CSI-managed volumes during the scheduling process, enabling it to
schedule your workloads based on the availability of volumes on a
specific client.

Each storage provider builds its own CSI plugin, and you can leverage
all of them in Nomad. You can launch jobs that claim storage volumes
from AWS Elastic Block Storage (EBS) or Elastic File System (EFS)
volumes, GCP persistent disks, Digital Ocean droplet storage volumes,
or vendor-agnostic third-party providers like Portworx. This also
means that many plugins written by storage providers to support
Kubernetes will support Nomad as well. You can find a list of plugins
in the [Kubernetes CSI Developer Documentation](https://kubernetes-csi.github.io/docs/drivers.html){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI}.

Unlike Nomad's [`host_volume`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}](/nomad/docs/configuration/client#host_volume-stanza){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI} feature, CSI-managed volumes can be added
and removed from a Nomad cluster without changing the Nomad client
configuration.

Using Nomad's CSI integration consists of three core workflows:
running CSI plugins, registering volumes for those plugins, and
running jobs that claim those volumes. In this guide, you\'ll run the
AWS Elastic Block Storage (EBS) plugin, register an EBS volume for
that plugin, and deploy a MySQL workload that claims that volume for
persistent storage.

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#prerequisites){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="prerequisites permalink"}Prerequisites {#prerequisites .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

To perform the tasks described in this guide, you need:

-   a Nomad environment on AWS with Consul installed. You can use this [Terraform
    environment](https://github.com/hashicorp/nomad/tree/master/terraform#provision-a-nomad-cluster-in-the-cloud){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI} to provision a sandbox environment. This tutorial will
    assume a cluster with one server node and two client nodes.

-   Nomad v1.3.0 or greater

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDI0IDI0IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEgMTdhMSAxIDAgMDExLTFoLjAxYTEgMSAwIDExMCAySDEyYTEgMSAwIDAxLTEtMXpNMTIuNzUgOC43NWEuNzUuNzUgMCAwMC0xLjUgMHY0LjVhLjc1Ljc1IDAgMDAxLjUgMHYtNC41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjY1OCAyLjM2NmEyLjY1MSAyLjY1MSAwIDAxMi42ODQgMGMuNDA3LjIzOS43NDUuNTgxLjk4NC45OWwuMDAyLjAwNCA4LjMxNSAxNC40NmEyLjg2IDIuODYgMCAwMS4wMDggMi43NTggMi43NTcgMi43NTcgMCAwMS0uOTc2IDEuMDNjLS40MS4yNS0uODc3LjM4Ni0xLjM1Ny4zOTJIMy42ODJhMi42NTMgMi42NTMgMCAwMS0xLjM1Ny0uMzkzIDIuNzU3IDIuNzU3IDAgMDEtLjk3NS0xLjAyOSAyLjg2IDIuODYgMCAwMS4wMDctMi43NThsLjAwNi0uMDEgOC4zMS0xNC40NS4wMDEtLjAwNGEyLjc1IDIuNzUgMCAwMS45ODQtLjk5em0uMzEzIDEuNzQ0di4wMDFMMi42NjUgMTguNTUyYTEuMzYgMS4zNiAwIDAwMCAxLjMwNmMuMTA4LjE5OC4yNjIuMzYuNDQzLjQ3LjE4LjExLjM4Mi4xNjkuNTg2LjE3MmgxNi42MWMuMjA0LS4wMDMuNDA2LS4wNjEuNTg2LS4xNzIuMTgxLS4xMS4zMzUtLjI3Mi40NDQtLjQ3YTEuMzYxIDEuMzYxIDAgMDAtLjAwMS0xLjMwNkwxMy4wMyA0LjExMmwtLjAwMS0uMDAyYTEuMjUgMS4yNSAwIDAwLS40NDYtLjQ1IDEuMTUxIDEuMTUxIDAgMDAtMS4xNjYgMCAxLjI1IDEuMjUgMCAwMC0uNDQ2LjQ1eiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PC9nPjwvc3ZnPg==)

Note

This tutorial is for demo purposes and only assumes a single server
node. Consult the [reference architecture](/nomad/tutorials/enterprise/production-reference-architecture-vm-with-consul#high-availability){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI} for production
configuration.

### [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#install-the-mysql-client){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h3__6xxpA aria-label="install the mysql client permalink"}Install the MySQL client {#install-the-mysql-client .hds-typography-display-400 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h3__ST7wF}

You will use the MySQL client to connect to our MySQL database and
verify our data. Ensure it is installed on a node with access to port
3306 on your Nomad clients:

Ubuntu:

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ sudo apt install mysql-client
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

CentOS:

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ sudo yum install mysql
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

macOS via Homebrew:

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ brew install mysql-client
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

### [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#deploy-an-aws-ebs-volume){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h3__6xxpA aria-label="deploy an aws ebs volume permalink"}Deploy an AWS EBS volume {#deploy-an-aws-ebs-volume .hds-typography-display-400 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h3__ST7wF}

Next, create an AWS EBS volume for the CSI plugin to mount where needed
for your jobs using the same Terraform stack you used
to create the Nomad cluster.

Add the following new resources to your Terraform stack.

``` {.code-lines_pre__bRMIh .language-hcl .mdx-code-blocks_codeBlockMargin__TI7B4}
resource "aws_iam_role_policy" "mount_ebs_volumes" {
  name   = "mount-ebs-volumes"
  role   = aws_iam_role.instance_role.id
  policy = data.aws_iam_policy_document.mount_ebs_volumes.json
}

data "aws_iam_policy_document" "mount_ebs_volumes" {
  statement {
    effect = "Allow"

    actions = [
      "ec2:DescribeInstances",
      "ec2:DescribeTags",
      "ec2:DescribeVolumes",
      "ec2:AttachVolume",
      "ec2:DetachVolume",
    ]
    resources = ["*"]
  }
}

resource "aws_ebs_volume" "mysql" {
  availability_zone = aws_instance.client[0].availability_zone
  size              = 40
}

output "ebs_volume" {
    value = <<EOM
# volume registration
type        = "csi"
id          = "mysql"
name        = "mysql"
external_id = "${aws_ebs_volume.mysql.id}"
plugin_id   = "aws-ebs0"

capability {
  access_mode     = "single-node-writer"
  attachment_mode = "file-system"
}
EOM
}
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

Run `terraform plan`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} and `terraform apply`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} to create the new IAM
policy and EBS volume. Then run `terraform output ebs_volume > volume.hcl`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}. You\'ll use this file later to register the volume with
Nomad.

#### [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#notes-about-the-above-terraform-configuration){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow aria-label="notes about the above terraform configuration permalink"}Notes about the above Terraform configuration {#notes-about-the-above-terraform-configuration .hds-typography-display-300 .hds-font-weight-semibold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h4__gBHMJ}

-   The IAM policy document and role policy are being added to the
    existing instance role for your EC2 instances. This policy will give
    the EC2 instances the ability to mount the volume you\'ve created in
    Terraform, but will not give them the ability to create new volumes.

-   The EBS volume resource is the data volume you will attach via CSI
    later. The output will be used to register the volume with Nomad.

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#enable-privileged-docker-jobs){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="enable privileged docker jobs permalink"}Enable privileged Docker jobs {#enable-privileged-docker-jobs .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

CSI Node plugins must run as privileged Docker jobs because they use
bidirectional mount propagation in order to mount disks to the underlying host.

CSI Plugins running as `node`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} or `monolith`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} type require root privileges (or
CAP_SYS_ADMIN on Linux) to mount volumes on the host. With the Docker task
driver, you can use the `privileged = true`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} configuration, but no other default
task drivers currently have this option.

Nomad's default configuration does not allow privileged Docker jobs, and must be
edited to allow them.

Bidirectional mount propagation can be dangerous and can damage the host
operating system. For this reason, it is only allowed in privileged containers.

To enable, edit the configuration for all of your Nomad clients, and set
[`allow_privileged`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}](/nomad/docs/drivers/docker#allow_privileged){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI} to true inside of the Docker plugin's configuration.
Restart the Nomad client process to load this new configuration.

If your Nomad client configuration does not already specify a Docker plugin
configuration, this minimal one will allow privileged containers. Add it to your
Nomad client configuration and restart Nomad.

``` {.code-lines_pre__bRMIh .language-hcl .mdx-code-blocks_codeBlockMargin__TI7B4}
plugin "docker" {
  config {
    allow_privileged = true
  }
}
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

There are certain Docker configurations that can prevent privileged containers
from performing mounts on the host. The error message will likely contain the
phrase \"linux mounts: path \... is mounted on \... but it is not a shared mount\".
More information can be found in the [Docker forums](https://forums.docker.com/t/make-mount-point-accesible-from-container-to-host-rshared-not-working/108759){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI}

If you do not have privileged containers enabled in Nomad, you will receive the
following error when you submit the plugin-aws-ebs-nodes job:

``` {.code-lines_pre__bRMIh .language-plaintext .mdx-code-blocks_codeBlockMargin__TI7B4}
Failed to create container configuration for image
"amazon/aws-ebs-csi-driver:v0.10.1": Docker privileged mode is disabled on this
Nomad agent
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#deploy-the-ebs-plugin){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="deploy the ebs plugin permalink"}Deploy the EBS plugin {#deploy-the-ebs-plugin .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

Plugins for CSI are run as Nomad jobs with a `plugin`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} stanza. The
official plugin for AWS EBS can be found on GitHub in the
[`aws-ebs-csi-driver`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}](https://github.com/kubernetes-sigs/aws-ebs-csi-driver){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI} repository. It's packaged as a
Docker container that you can run with the Docker task driver.

Each CSI plugin supports one or more types: Controllers and
Nodes. Node instances of a plugin need to run on every Nomad client
node where you want to mount volumes. You\'ll probably want to run Node
plugins instances as Nomad `system`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} jobs. Some plugins also require
coordinating Controller instances that can run on any Nomad client
node.

The AWS EBS plugin requires a controller plugin to coordinate access
to the EBS volume, and node plugins to mount the volume to the EC2
instance. You\'ll create a controller job as a nomad `service`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} job and
the node job as a Nomad `system`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} job.

Create a file for the controller job called `plugin-ebs-controller.nomad.hcl`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} with the following content.

``` {.code-lines_pre__bRMIh .language-hcl .mdx-code-blocks_codeBlockMargin__TI7B4}
job "plugin-aws-ebs-controller" {
  datacenters = ["dc1"]

  group "controller" {
    task "plugin" {
      driver = "docker"

      config {
        image = "amazon/aws-ebs-csi-driver:v0.10.1"

        args = [
          "controller",
          "--endpoint=unix://csi/csi.sock",
          "--logtostderr",
          "--v=5",
        ]
      }

      csi_plugin {
        id        = "aws-ebs0"
        type      = "controller"
        mount_dir = "/csi"
      }

      resources {
        cpu    = 500
        memory = 256
      }
    }
  }
}
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

Create a file for the node job named `plugin-ebs-nodes.nomad.hcl`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} with the following content.

``` {.code-lines_pre__bRMIh .language-hcl .mdx-code-blocks_codeBlockMargin__TI7B4}
job "plugin-aws-ebs-nodes" {
  datacenters = ["dc1"]

  # you can run node plugins as service jobs as well, but this ensures
  # that all nodes in the DC have a copy.
  type = "system"

  group "nodes" {
    task "plugin" {
      driver = "docker"

      config {
        image = "amazon/aws-ebs-csi-driver:v0.10.1"

        args = [
          "node",
          "--endpoint=unix://csi/csi.sock",
          "--logtostderr",
          "--v=5",
        ]

        # node plugins must run as privileged jobs because they
        # mount disks to the host
        privileged = true
      }

      csi_plugin {
        id        = "aws-ebs0"
        type      = "node"
        mount_dir = "/csi"
      }

      resources {
        cpu    = 500
        memory = 256
      }
    }
  }
}
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#deploy-the-plugin-jobs){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="deploy the plugin jobs permalink"}Deploy the plugin jobs {#deploy-the-plugin-jobs .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

Deploy both jobs with `nomad job run plugin-ebs-controller.nomad.hcl`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} and
`nomad job run plugin-ebs-nodes.nomad.hcl`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}. It will take a few moments
for the plugins to register themselves as healthy with Nomad after the
job itself is running. You can check the plugin status with the `nomad plugin status`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} command.

Note that the plugin does not have a namespace, even though the jobs
that launched it do. Plugins are treated as resources available to the
whole cluster in the same way as Nomad clients.

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad job status
ID                         Type     Priority  Status   Submit Date
plugin-aws-ebs-controller  service  50        running  2020-03-20T10:49:13-04:00
plugin-aws-ebs-nodes       system   50        running  2020-03-20T10:49:17-04:00
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad plugin status aws-ebs0
ID                   = aws-ebs0
Provider             = ebs.csi.aws.com
Version              = v0.10.1
Controllers Healthy  = 1
Controllers Expected = 1
Nodes Healthy        = 2
Nodes Expected       = 2

Allocations
ID        Node ID   Task Group  Version  Desired  Status   Created    Modified
de2929cc  ac41c184  controller  0        run      running  1m26s ago  1m8s ago
d1d4831e  ac41c184  nodes       0        run      running  1m22s ago  1m18s ago
2b815e02  b896731a  nodes       0        run      running  1m22s ago  1m14s ago
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#register-the-volume){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="register the volume permalink"}Register the volume {#register-the-volume .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

The CSI plugins need to be told about each volume they manage, so for
each volume you\'ll run `nomad volume register`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}. Earlier you used
Terraform to output a `volume.hcl`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} file with the volume definition.

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad volume register volume.hcl
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad volume status mysql
ID                   = mysql
Name                 = mysql
External ID          = vol-0b756b75620d63af5
Plugin ID            = aws-ebs0
Provider             = ebs.csi.aws.com
Version              = v0.10.1
Schedulable          = true
Controllers Healthy  = 1
Controllers Expected = 1
Nodes Healthy        = 2
Nodes Expected       = 2
Access Mode          = <none>
Attachment Mode      = <none>
Mount Options        = <none>
Namespace            = default

Allocations
No allocations placed
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

The volume status output above indicates that the volume is
ready to be scheduled, but has no allocations currently using it.

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#deploy-mysql){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="deploy mysql permalink"}Deploy MySQL {#deploy-mysql .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

### [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#create-the-job-file){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h3__6xxpA aria-label="create the job file permalink"}Create the job file {#create-the-job-file .hds-typography-display-400 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h3__ST7wF}

You are now ready to deploy a MySQL database that can use Nomad host
volumes for storage. Create a file called `mysql.nomad.hcl`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} and provide it
the following contents.

``` {.code-lines_pre__bRMIh .language-hcl .mdx-code-blocks_codeBlockMargin__TI7B4}
job "mysql-server" {
  datacenters = ["dc1"]
  type        = "service"

  group "mysql-server" {
    count = 1

    volume "mysql" {
      type            = "csi"
      read_only       = false
      source          = "mysql"
      access_mode     = "single-node-writer"
      attachment_mode = "file-system"
    }

    network {
      port "db" {
        static = 3306
      }
    }

    restart {
      attempts = 10
      interval = "5m"
      delay    = "25s"
      mode     = "delay"
    }

    task "mysql-server" {
      driver = "docker"

      volume_mount {
        volume      = "mysql"
        destination = "/srv"
        read_only   = false
      }

      env {
        MYSQL_ROOT_PASSWORD = "password"
      }

      config {
        image = "hashicorp/mysql-portworx-demo:latest"
        args  = ["--datadir", "/srv/mysql"]
        ports = ["db"]
      }

      resources {
        cpu    = 500
        memory = 1024
      }

      service {
        name = "mysql-server"
        port = "db"

        check {
          type     = "tcp"
          interval = "10s"
          timeout  = "2s"
        }
      }
    }
  }
}
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

#### [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#notes-about-the-above-job-specification){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow aria-label="notes about the above job specification permalink"}Notes about the above job specification {#notes-about-the-above-job-specification .hds-typography-display-300 .hds-font-weight-semibold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h4__gBHMJ}

-   The service name is `mysql-server`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} which you will use later to
    connect to the database.

-   The `read_only`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} argument is supplied on all of the volume-related
    stanzas in to help highlight all of the places you would need to
    change to make a read-only volume mount. Consult the [`volume`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}](/nomad/docs/job-specification/volume){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI},
    and [`volume_mount`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}](/nomad/docs/job-specification/volume_mount){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI} specifications for more details.

-   For lower-memory instances, you might need to reduce the requested
    memory in the resources stanza to harmonize with available resources
    in your cluster.

### [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#run-the-job){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h3__6xxpA aria-label="run the job permalink"}Run the job {#run-the-job .hds-typography-display-400 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h3__ST7wF}

Register the job file you created in the previous step with the
following command.

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad run mysql.nomad.hcl
==> Monitoring evaluation "aa478d82"
    Evaluation triggered by job "mysql-server"
    Allocation "6c3b3703" created: node "be8aad4e", group "mysql-server"
    Evaluation status changed: "pending" -> "complete"
==> Evaluation "aa478d82" finished with status "complete"
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

The allocation status will have a section for the CSI volume, and the
volume status will show the allocation claiming the volume.

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad alloc status 6c3b3703
CSI Volumes:
ID     Read Only
mysql  false
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad volume status mysql
ID                   = mysql
Name                 = mysql
External ID          = vol-0b756b75620d63af5
Plugin ID            = aws-ebs0
Provider             = ebs.csi.aws.com
Version              = v0.10.1
Schedulable          = true
Controllers Healthy  = 1
Controllers Expected = 1
Nodes Healthy        = 2
Nodes Expected       = 2
Access Mode          = single-node-writer
Attachment Mode      = file-system
Mount Options        = <none>
Namespace            = default

Allocations
ID        Node ID   Task Group    Version  Desired  Status   Created    Modified
6c3b3703  ac41c184  mysql-server  3        run      running  1m40s ago  1m2s ago
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#write-data-to-mysql){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="write data to mysql permalink"}Write data to MySQL {#write-data-to-mysql .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

### [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#connect-to-mysql){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h3__6xxpA aria-label="connect to mysql permalink"}Connect to MySQL {#connect-to-mysql .hds-typography-display-400 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h3__ST7wF}

Using the mysql client (installed [earlier](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#install-the-mysql-client){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI}), connect
to the database and access the information.

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ mysql -h mysql-server.service.consul -u web -p -D itemcollection
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

The password for this demo database is `password`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}.

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDI0IDI0IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEgMTdhMSAxIDAgMDExLTFoLjAxYTEgMSAwIDExMCAySDEyYTEgMSAwIDAxLTEtMXpNMTIuNzUgOC43NWEuNzUuNzUgMCAwMC0xLjUgMHY0LjVhLjc1Ljc1IDAgMDAxLjUgMHYtNC41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjY1OCAyLjM2NmEyLjY1MSAyLjY1MSAwIDAxMi42ODQgMGMuNDA3LjIzOS43NDUuNTgxLjk4NC45OWwuMDAyLjAwNCA4LjMxNSAxNC40NmEyLjg2IDIuODYgMCAwMS4wMDggMi43NTggMi43NTcgMi43NTcgMCAwMS0uOTc2IDEuMDNjLS40MS4yNS0uODc3LjM4Ni0xLjM1Ny4zOTJIMy42ODJhMi42NTMgMi42NTMgMCAwMS0xLjM1Ny0uMzkzIDIuNzU3IDIuNzU3IDAgMDEtLjk3NS0xLjAyOSAyLjg2IDIuODYgMCAwMS4wMDctMi43NThsLjAwNi0uMDEgOC4zMS0xNC40NS4wMDEtLjAwNGEyLjc1IDIuNzUgMCAwMS45ODQtLjk5em0uMzEzIDEuNzQ0di4wMDFMMi42NjUgMTguNTUyYTEuMzYgMS4zNiAwIDAwMCAxLjMwNmMuMTA4LjE5OC4yNjIuMzYuNDQzLjQ3LjE4LjExLjM4Mi4xNjkuNTg2LjE3MmgxNi42MWMuMjA0LS4wMDMuNDA2LS4wNjEuNTg2LS4xNzIuMTgxLS4xMS4zMzUtLjI3Mi40NDQtLjQ3YTEuMzYxIDEuMzYxIDAgMDAtLjAwMS0xLjMwNkwxMy4wMyA0LjExMmwtLjAwMS0uMDAyYTEuMjUgMS4yNSAwIDAwLS40NDYtLjQ1IDEuMTUxIDEuMTUxIDAgMDAtMS4xNjYgMCAxLjI1IDEuMjUgMCAwMC0uNDQ2LjQ1eiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PC9nPjwvc3ZnPg==)

Note

This tutorial is for demo purposes and does not
follow best practices for securing database passwords. Consult [Keeping
Passwords Secure](https://dev.mysql.com/doc/refman/8.0/en/password-security.html){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI} for more information.

Consul is installed alongside Nomad in this cluster so you are able to
connect using the `mysql-server`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} service name you registered with our
task in our job file.

### [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#add-test-data){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h3__6xxpA aria-label="add test data permalink"}Add test data {#add-test-data .hds-typography-display-400 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h3__ST7wF}

Once you are connected to the database, verify the table `items`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}
exists.

``` {.code-lines_pre__bRMIh .language-sql .mdx-code-blocks_codeBlockMargin__TI7B4}
mysql> show tables;
+--------------------------+
| Tables_in_itemcollection |
+--------------------------+
| items                    |
+--------------------------+
1 row in set (0.00 sec)
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

Display the contents of this table with the following command.

``` {.code-lines_pre__bRMIh .language-sql .mdx-code-blocks_codeBlockMargin__TI7B4}
mysql> select * from items;
+----+----------+
| id | name     |
+----+----------+
|  1 | bike     |
|  2 | baseball |
|  3 | chair    |
+----+----------+
3 rows in set (0.00 sec)
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

Now add some data to this table (after you terminate our database in
Nomad and bring it back up, this data should still be intact).

``` {.code-lines_pre__bRMIh .language-sql .mdx-code-blocks_codeBlockMargin__TI7B4}
mysql> INSERT INTO items (name) VALUES ('glove');
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

Run the `INSERT INTO`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} command as many times as you like with different
values.

``` {.code-lines_pre__bRMIh .language-sql .mdx-code-blocks_codeBlockMargin__TI7B4}
mysql> INSERT INTO items (name) VALUES ('hat');
mysql> INSERT INTO items (name) VALUES ('keyboard');
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

Once you are done, type `exit`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} and return back to the Nomad client
command line.

``` {.code-lines_pre__bRMIh .language-sql .mdx-code-blocks_codeBlockMargin__TI7B4}
mysql> exit
Bye
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#destroy-the-database-job){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="destroy the database job permalink"}Destroy the database job {#destroy-the-database-job .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

Run the following command to stop and purge the MySQL job from the
cluster.

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad stop -purge mysql-server
==> Monitoring evaluation "6b784149"
    Evaluation triggered by job "mysql-server"
    Evaluation status changed: "pending" -> "complete"
==> Evaluation "6b784149" finished with status "complete"
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

Verify mysql is no longer running in the cluster.

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad job status mysql
No job(s) with prefix or id "mysql" found
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#re-deploy-and-verify){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="re deploy and verify permalink"}Re-deploy and verify {#re-deploy-and-verify .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

Using the `mysql.nomad.hcl`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} job file [from earlier](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#create-the-job-file){.inline-link_root__jsfnc .g-focus-ring-from-box-shadow .hds-typography-body-300 .hds-font-weight-regular .inline-link_primary__1z8vI}, re-deploy
the database to the Nomad cluster.

``` {.code-lines_pre__bRMIh .language-shell-session .mdx-code-blocks_codeBlockMargin__TI7B4}
$ nomad run mysql.nomad.hcl
==> Monitoring evaluation "61b4f648"
    Evaluation triggered by job "mysql-server"
    Allocation "8e1324d2" created: node "be8aad4e", group "mysql-server"
    Evaluation status changed: "pending" -> "complete"
==> Evaluation "61b4f648" finished with status "complete"
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

Once you re-connect to MySQL, you should be able to verify that the
information you added prior to destroying the database is still
present.

``` {.code-lines_pre__bRMIh .language-sql .mdx-code-blocks_codeBlockMargin__TI7B4}
mysql> select * from items;
+----+----------+
| id | name     |
+----+----------+
|  1 | bike     |
|  2 | baseball |
|  3 | chair    |
|  4 | glove    |
|  5 | hat      |
|  6 | keyboard |
+----+----------+
6 rows in set (0.00 sec)
```

Copy![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9InN0eWxlX3N2Z19fODVNTFciPjxnIGZpbGw9ImN1cnJlbnRDb2xvciI+PHBhdGggZD0iTTIuMjUgMEEyLjI1IDIuMjUgMCAwMDAgMi4yNXY3LjVBMi4yNSAyLjI1IDAgMDAyLjI1IDEyaC4yNWEuNzUuNzUgMCAwMDAtMS41aC0uMjVhLjc1Ljc1IDAgMDEtLjc1LS43NXYtNy41YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2LjI1YS43NS43NSAwIDAwMS41IDB2LS4yNUEyLjI1IDIuMjUgMCAwMDkuNzUgMGgtNy41eiI+PC9wYXRoPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgNEEyLjI1IDIuMjUgMCAwMDQgNi4yNXY3LjVBMi4yNSAyLjI1IDAgMDA2LjI1IDE2aDcuNUEyLjI1IDIuMjUgMCAwMDE2IDEzLjc1di03LjVBMi4yNSAyLjI1IDAgMDAxMy43NSA0aC03LjV6TTUuNSA2LjI1YS43NS43NSAwIDAxLjc1LS43NWg3LjVhLjc1Ljc1IDAgMDEuNzUuNzV2Ny41YS43NS43NSAwIDAxLS43NS43NWgtNy41YS43NS43NSAwIDAxLS43NS0uNzV2LTcuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvZz48L3N2Zz4=){.style_svg__85MLW}

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#cleanup){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="cleanup permalink"}Cleanup {#cleanup .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

Once you have completed this guide, you should perform the following
cleanup steps.

-   Stop and purge the `mysql-server`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} job.

-   Unregister the EBS volume from Nomad with `nomad volume deregister mysql`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}.

-   Stop and purge the `plugin-aws-ebs-controller`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} and `plugin-aws-ebs-nodes`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200} job.

-   Destroy the EBS volume with `terraform destroy`{.mdx-inline-code_inlineCode__mRRzk .mdx-inline-code_size-200__jzxqL .hds-typography-code-200}.

## [![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9Im1keC1oZWFkaW5nLXBlcm1hbGlua19pY29uX193UnVRYSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNMTEuMTQxIDFhMy44OTMgMy44OTMgMCAwMC0yLjczOCAxLjA5M0w3LjMxNCAzLjE3NUEuNzUuNzUgMCAwMDguMzcyIDQuMjRsMS4wNzctMS4wN2EyLjM5MyAyLjM5MyAwIDAxMy4zODQgMy4zODJsLTEuODgxIDEuODhhMi4zOTMgMi4zOTMgMCAwMS0zLjYwOC0uMjU4Ljc1Ljc1IDAgMDAtMS4yMDIuODk5IDMuODkzIDMuODkzIDAgMDA1Ljg3LjQybDEuODg2LTEuODg2LjAxLS4wMDlBMy44OTMgMy44OTMgMCAwMDExLjE0IDF6Ij48L3BhdGg+PHBhdGggZD0iTTcuMDE5IDUuMzY1YTMuODkzIDMuODkzIDAgMDAtMy4wMzIgMS4xM0wyLjEwMiA4LjM4MmwtLjAxLjAxYTMuODkzIDMuODkzIDAgMDA1LjUwNSA1LjUwNGwxLjA4NC0xLjA4NGEuNzUuNzUgMCAwMC0xLjA2LTEuMDZsLTEuMDcgMS4wN2EyLjM5MyAyLjM5MyAwIDAxLTMuMzg0LTMuMzg0bDEuODgxLTEuODhhMi4zOTMgMi4zOTMgMCAwMTMuNjA5LjI1OC43NS43NSAwIDEwMS4yLS44OTlBMy44OTMgMy44OTMgMCAwMDcuMDIgNS4zNjV6Ij48L3BhdGg+PC9nPjwvc3ZnPg==){.mdx-heading-permalink_icon__wRuQa}](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#summary){.mdx-heading-permalink_root__rMneC .g-focus-ring-from-box-shadow .mdx-heading-permalink_h2___xzUm aria-label="summary permalink"}Summary {#summary .hds-typography-display-500 .hds-font-weight-bold .mdx-headings_heading__T_KWX .g-offset-scroll-margin-top .mdx-headings_h2__8mhgN}

In this guide, you deployed a CSI plugin to Nomad, registered an AWS
EBS volume for that plugin, and created a job that mounted this volume
to a Docker MySQL container that wrote data that persisted beyond the
job's lifecycle.

**Was this tutorial helpful?**

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0idmFyKC0tdG9rZW4tY29sb3ItZm9yZWdyb3VuZC1mYWludCkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcuNTk2IDEuNTE2bC0yLjU2IDUuNzU5VjE0LjVoNy40NzVhLjc1Ljc1IDAgMDAuNzQxLS42MzdsLjk5NC02LjU1YS43NS43NSAwIDAwLS43NDEtLjg2Mkg5LjczOGMtLjY5IDAtMS4yNS0uNTYtMS4yNS0xLjI1VjIuNTc1YzAtLjUzLS4zODUtLjk3Mi0uODkyLTEuMDZ6TTMuNTM2IDE0LjVWNy44NjZIMi4yNWEuNzUuNzUgMCAwMC0uNzUuNzV2NS4xMzRjMCAuNDE0LjMzNi43NS43NS43NWgxLjI4N3pNMy44IDYuMzY2TDYuMzEuNzE2QTEuMjA2IDEuMjA2IDAgMDE3LjQxMiAwYTIuNTc1IDIuNTc1IDAgMDEyLjU3NiAyLjU3NXYyLjM3NmgzLjUxN2EyLjI1IDIuMjUgMCAwMTIuMjI0IDIuNTg4bC0uOTk0IDYuNTQ5QTIuMjUgMi4yNSAwIDAxMTIuNTExIDE2SDIuMjVBMi4yNSAyLjI1IDAgMDEwIDEzLjc1VjguNjE2YTIuMjUgMi4yNSAwIDAxMi4yNS0yLjI1SDMuOHoiIGNsaXAtcnVsZT0iZXZlbm9kZCI+PC9wYXRoPjwvc3ZnPg==)Yes

![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PHBhdGggZmlsbD0idmFyKC0tdG9rZW4tY29sb3ItZm9yZWdyb3VuZC1mYWludCkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTguNDA0IDE0LjQ4NGwyLjU2LTUuNzU5VjEuNUgzLjQ4OGEuNzUuNzUgMCAwMC0uNzQxLjYzN2wtLjk5NSA2LjU1YS43NS43NSAwIDAwLjc0Mi44NjJoMy43NjdjLjY5IDAgMS4yNS41NiAxLjI1IDEuMjV2Mi42MjZjMCAuNTMuMzg1Ljk3Mi44OTIgMS4wNnpNMTIuNDY0IDEuNXY2LjYzNGgxLjI4NmEuNzUuNzUgMCAwMC43NS0uNzVWMi4yNWEuNzUuNzUgMCAwMC0uNzUtLjc1aC0xLjI4N3pNMTIuMiA5LjYzNGwtMi41MTEgNS42NUExLjIwNiAxLjIwNiAwIDAxOC41ODggMTZhMi41NzUgMi41NzUgMCAwMS0yLjU3Ni0yLjU3NXYtMi4zNzZIMi40OTVBMi4yNSAyLjI1IDAgMDEuMjcgOC40NmwuOTk1LTYuNTQ5QTIuMjUgMi4yNSAwIDAxMy40ODkgMEgxMy43NUEyLjI1IDIuMjUgMCAwMTE2IDIuMjV2NS4xMzRhMi4yNSAyLjI1IDAgMDEtMi4yNSAyLjI1SDEyLjJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiPjwvcGF0aD48L3N2Zz4=)No

[![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImRpcmVjdGlvbmFsLWxpbmstYm94X2ljb25fX2RqWl9xIGRpcmVjdGlvbmFsLWxpbmstYm94X2RpcmVjdGlvbi1wcmV2aW91c19feklJUVoiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTcuNzY1IDQuMDQ1YS43NS43NSAwIDEwLTEuMDMtMS4wOUwyLjIzNyA3LjIwM2EuNzQ4Ljc0OCAwIDAwLS4wMDEgMS4wOTNsNC40OTkgNC4yNWEuNzUuNzUgMCAwMDEuMDMtMS4wOTFMNC42MzYgOC41aDguNjE0YS43NS43NSAwIDAwMC0xLjVINC42MzZsMy4xMjktMi45NTV6Ij48L3BhdGg+PC9zdmc+){.directional-link-box_icon__djZ_q .directional-link-box_direction-previous__zIIQZ}Previous](/nomad/tutorials/stateful-workloads/stateful-workloads-host-volumes){.directional-link-box_linkbox__fZo8Z .directional-link-box_direction-previous__zIIQZ aria-label="Go to previous tutorial: Workloads with host volumes" heap-track="directional-link-box-previous"}

Workloads with host volumes

[![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSIgY2xhc3M9ImRpcmVjdGlvbmFsLWxpbmstYm94X2ljb25fX2RqWl9xIGRpcmVjdGlvbmFsLWxpbmstYm94X2RpcmVjdGlvbi1uZXh0X19XcjJPUiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNOC4yMzUgNC4wNDVhLjc1Ljc1IDAgMTExLjAzLTEuMDlsNC41IDQuMjVhLjc1Ljc1IDAgMDEwIDEuMDlsLTQuNSA0LjI1YS43NS43NSAwIDAxLTEuMDMtMS4wOUwxMS4zNjQgOC41SDIuNzVhLjc1Ljc1IDAgMDEwLTEuNWg4LjYxNEw4LjIzNSA0LjA0NXoiPjwvcGF0aD48L3N2Zz4=){.directional-link-box_icon__djZ_q .directional-link-box_direction-next__Wr2OR}Next](/nomad/tutorials/stateful-workloads/stateful-workloads-portworx){.directional-link-box_linkbox__fZo8Z .directional-link-box_direction-next__Wr2OR aria-label="Go to next tutorial: Workloads with Portworx" heap-track="directional-link-box-next"}

Workloads with Portworx

On this page:

1.  [Stateful Workloads with Container Storage Interface](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#stateful-workloads-csi-volumes){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-0"}
2.  [Prerequisites](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#prerequisites){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-1"}
3.  [Enable privileged Docker jobs](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#enable-privileged-docker-jobs){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-2"}
4.  [Deploy the EBS plugin](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#deploy-the-ebs-plugin){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-3"}
5.  [Deploy the plugin jobs](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#deploy-the-plugin-jobs){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-4"}
6.  [Register the volume](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#register-the-volume){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-5"}
7.  [Deploy MySQL](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#deploy-mysql){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-6"}
8.  [Write data to MySQL](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#write-data-to-mysql){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-7"}
9.  [Destroy the database job](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#destroy-the-database-job){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-8"}
10. [Re-deploy and verify](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#re-deploy-and-verify){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-9"}
11. [Cleanup](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#cleanup){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-10"}
12. [Summary](/nomad/tutorials/stateful-workloads/stateful-workloads-csi-volumes#summary){.outline-link_root__K1_Dc .hds-typography-body-200 .g-focus-ring-from-box-shadow heap-track="toc-list-item-index-11"}

[](https://www.hashicorp.com/){.footer_logo__SR4lJ .g-focus-ring-from-box-shadow aria-label="Go to HashiCorp home page"}

![](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzE3IiBoZWlnaHQ9Ijg4IiB2aWV3Ym94PSIwIDAgMzE3IDg4IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMDcuNjkyIDY0LjQyMVY0Ny40aC0xNC45N3YxNy4wMmgtNy42MjNWMjQuMDZoNy42MjJ2MTYuNjAyaDE0Ljk3MVYyNC4wNmg3LjYyMnY0MC4zNmgtNy42MjJ6bTM1LjU2Ny0uMDAxaC02LjA1M2wtLjU0OC0xLjk5NmExNi4xMzcgMTYuMTM3IDAgMDEtOC43ODkgMi42MDdjLTUuMzk3IDAtNy42OTktMy42OTctNy42OTktOC43OSAwLTUuOTk4IDIuNjA3LTguMyA4LjYwNi04LjNoNy4wODl2LTMuMDk1YzAtMy4yNy0uOTA3LTQuNDIxLTUuNjMzLTQuNDIxYTQxLjI1NSA0MS4yNTUgMCAwMC04LjE3OS44NzdsLS45MDctNS42MzRhMzguNDk2IDM4LjQ5NiAwIDAxMTAuMTIyLTEuMzk1YzkuMjY5IDAgMTEuOTk4IDMuMjcgMTEuOTk4IDEwLjY3MmwtLjAwNyAxOS40NzZ6bS03LjM5NC0xMS4xNTFoLTUuNDVjLTIuNDI0IDAtMy4wODcuNjYzLTMuMDg3IDIuOTEyIDAgMi4wNTguNjYzIDIuOTczIDIuOTcyIDIuOTczYTExLjYyOSAxMS42MjkgMCAwMDUuNTcyLTEuNTI1bC0uMDA3LTQuMzZ6bTIxLjcwMSAxMS43NTRhMzQuNzc2IDM0Ljc3NiAwIDAxLTEwLjE4My0xLjdsMS4wMjktNS42MzNhMzMuMDM4IDMzLjAzOCAwIDAwOC43ODggMS4yNzNjMy4yNzEgMCAzLjc1OC0uNzYyIDMuNzU4LTIuOTczIDAtMS44MTQtLjM2Ni0yLjcyOS01LjE1Mi0zLjg4LTcuMjExLTEuNzYtOC4wNTgtMy41NzUtOC4wNTgtOS4yNjkgMC01LjkzOCAyLjYwNy04LjU0NSAxMS4wMy04LjU0NSAyLjk4LjAwMyA1Ljk0OS4zNDggOC44NSAxLjAzbC0uNzYyIDUuODc2YTUxLjk4IDUxLjk4IDAgMDAtOC4xMTgtLjg0NmMtMy4yMDkgMC0zLjc1OC43NjMtMy43NTggMi41NDYgMCAyLjM2My4xODMgMi41NDYgNC4xODUgMy41NzUgOC4yNjMgMi4xODggOS4wNTUgMy4yNzggOS4wNTUgOS4zMDcgMCA1LjcyNS0xLjc2MSA5LjIzOS0xMC42NjQgOS4yMzl6bTMyLjY2My0uNjAyVjQzLjg0YzAtMS41NzgtLjY2My0yLjM2My0yLjM2My0yLjM2My0xLjgxNCAwLTUuMDMxIDEuMDktNy42OTkgMi40ODV2MjAuNDU5aC03LjM5NFYyMi44NDdsNy4zOTQtMS4wMjl2MTUuMzNhMjYuMDQ1IDI2LjA0NSAwIDAxMTAuNzg2LTIuODUyYzQuOTA5IDAgNi42NjIgMy40NTMgNi42NjIgOC43Mjh2MjEuMzk3aC03LjM4NnptMTIuODQ0LTMzLjY5MnYtOC41NDVoNy4zOTR2OC41NDVoLTcuMzk0em0wIDMzLjY5MlYzNC45MDZoNy4zOTR2MjkuNTE1aC03LjM5NHpNMjE1LjYyIDM1LjE1YzAtNy4zOTQgNC4yOTktMTEuNjkzIDE0LjM2MS0xMS42OTMgMy42OTcgMCA3LjM4LjQ0NyAxMC45NjkgMS4zMzRsLS44MzkgNi42MDFhNTkuNTE3IDU5LjUxNyAwIDAwLTkuOTA5LTEuMDI5Yy01LjI3NSAwLTYuOTY3IDEuODIyLTYuOTY3IDYuMDk4djE1LjUxMmMwIDQuMyAxLjcgNi4wOTggNi45NjcgNi4wOThhNTkuNTA2IDU5LjUwNiAwIDAwOS45MDktMS4wMjlsLjg0NiA2LjYwOWE0NS42NzIgNDUuNjcyIDAgMDEtMTAuOTY4IDEuMzM0Yy0xMC4wNjIgMC0xNC4zNjEtNC4zLTE0LjM2MS0xMS42OTNsLS4wMDgtMTguMTQyem00MC40OTkgMjkuODczYy0xMC4xMjMgMC0xMi44NDQtNS41NzItMTIuODQ0LTExLjYzMnYtNy40NTVjMC02LjA2IDIuNzI4LTExLjYzMiAxMi44NDQtMTEuNjMyIDEwLjExNSAwIDEyLjg0NCA1LjU3MiAxMi44NDQgMTEuNjMydjcuNDU1Yy0uMDIzIDYuMDYtMi43NDQgMTEuNjMyLTEyLjg0NCAxMS42MzJ6bTAtMjQuMzkyYy0zLjk0MSAwLTUuNDUgMS43Ni01LjQ1IDUuMDkydjcuOTEyYzAgMy4zMzEgMS41MjQgNS4wOTIgNS40NSA1LjA5MiAzLjkyNSAwIDUuNDUtMS43NiA1LjQ1LTUuMDkydi03Ljk0M2MtLjAxNS0zLjMzLTEuNTMyLTUuMDkyLTUuNDUtNS4wOTJ2LjAzem0zMi40NTcuNDU3YTU3LjgzNSA1Ny44MzUgMCAwMC03LjgyMSA0LjN2MTkuMDU2aC03LjM5NFYzNC45MDZoNi4yNDNsLjQ4OCAzLjI3YTMzLjA2NCAzMy4wNjQgMCAwMTcuNzYtMy44OGwuNzI0IDYuNzkyem0yOC4wMzUgMTMuNTE1YzAgNi41NDgtMi45MTEgMTAuNDItOS43NTYgMTAuNDJhNDAuNzYgNDAuNzYgMCAwMS03Ljg4Mi0uODUzdjEyLjE5NmwtNy4zOTQgMS4wMjlWMzQuOTA2aDUuODc3bC43NjIgMi40ODVhMTUuNTM1IDE1LjUzNSAwIDAxOS4zMy0zLjA4N2M1LjkzOCAwIDkuMDg2IDMuNTE0IDkuMDg2IDEwLjI0NWwtLjAyMyAxMC4wNTR6bS0xNy42MzEgMy4zMzFjMi4xNTIuNDc0IDQuMzQ2LjczIDYuNTQ4Ljc2MyAyLjY2OCAwIDMuNjk3LTEuMjc0IDMuNjk3LTMuOTQxVjQ0LjM1YzAtMi40MjQtLjkwNy0zLjc1OC0zLjYzNi0zLjc1OGExMC40NiAxMC40NiAwIDAwLTYuNjA5IDIuNjY4djE0LjY3M3pNMjkuMTM0IDdMMCAyMy44MDh2NDAuMzYxbDEwLjk0NiA2LjMyVjMwLjEyN2wxOC4xODgtMTAuNTA0Vjd6IiBmaWxsPSIjMDAwIj48L3BhdGg+PHBhdGggZD0iTTQwLjc1OCA3djMyLjE0NEgyOS4xMzNWMjcuMTQ3bC0xMC45NDUgNi4zMTlWNzQuNjVsMTAuOTQ2IDYuMzM1VjQ4LjkzMmgxMS42MjR2MTEuOTE0bDEwLjk0Ni02LjMxMlYxMy4zMkw0MC43NTggN3oiIGZpbGw9IiMwMDAiPjwvcGF0aD48cGF0aCBkPSJNNDAuNzU4IDgxTDY5Ljg5IDY0LjE5MlYyMy44MzFsLTEwLjk0Ni02LjMydjQwLjM2Mkw0MC43NTggNjguMzc3VjgxeiIgZmlsbD0iIzAwMCI+PC9wYXRoPjwvc3ZnPg==)

Theme

-   [Certifications](/certifications){.footer_linkAction__g2TXk .g-focus-ring-from-box-shadow}
-   [System Status](https://status.hashicorp.com){.footer_linkAction__g2TXk .g-focus-ring-from-box-shadow}
-   Cookie Manager
-   [Terms of Use](https://www.hashicorp.com/terms-of-service){.footer_linkAction__g2TXk .g-focus-ring-from-box-shadow}
-   [Security](https://www.hashicorp.com/security){.footer_linkAction__g2TXk .g-focus-ring-from-box-shadow}
-   [Privacy](https://www.hashicorp.com/privacy){.footer_linkAction__g2TXk .g-focus-ring-from-box-shadow}
-   [Trademark Policy](https://www.hashicorp.com/trademark-policy){.footer_linkAction__g2TXk .g-focus-ring-from-box-shadow}
-   [Trade Controls](https://www.hashicorp.com/trade-controls){.footer_linkAction__g2TXk .g-focus-ring-from-box-shadow}
-   [Give Feedback![](data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld2JveD0iMCAwIDE2IDE2IiBhcmlhLWhpZGRlbj0idHJ1ZSI+PGcgZmlsbD0iY3VycmVudENvbG9yIj48cGF0aCBkPSJNOSAuNzVBLjc1Ljc1IDAgMDE5Ljc1IDBoNC41Yy4yMDYgMCAuMzkzLjA4My41MjkuMjE4bC4wMDEuMDAyLjAwMi4wMDFBLjc0OC43NDggMCAwMTE1IC43NXY0LjVhLjc1Ljc1IDAgMDEtMS41IDBWMi41Nkw3LjI4IDguNzhhLjc1Ljc1IDAgMDEtMS4wNi0xLjA2bDYuMjItNi4yMkg5Ljc1QS43NS43NSAwIDAxOSAuNzV6Ij48L3BhdGg+PHBhdGggZD0iTTMuMjUgMy41YS43NS43NSAwIDAwLS43NS43NXY3LjVjMCAuNDE0LjMzNi43NS43NS43NWg3LjVhLjc1Ljc1IDAgMDAuNzUtLjc1di00YS43NS43NSAwIDAxMS41IDB2NEEyLjI1IDIuMjUgMCAwMTEwLjc1IDE0aC03LjVBMi4yNSAyLjI1IDAgMDExIDExLjc1di03LjVBMi4yNSAyLjI1IDAgMDEzLjI1IDJoNGEuNzUuNzUgMCAwMTAgMS41aC00eiI+PC9wYXRoPjwvZz48L3N2Zz4=)](https://forms.gle/fnHLuNahLEhjuKvE6){.footer_linkAction__g2TXk .g-focus-ring-from-box-shadow aria-describedby="undefinedopens-in-new-tab-label-react-aria-75" target="_blank"}(opens in new tab)
